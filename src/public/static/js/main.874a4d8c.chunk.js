(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{273:function(e,t){e.exports="0.6.2"},302:function(e,t,n){e.exports=n(554)},312:function(e,t,n){},379:function(e,t,n){},509:function(e,t,n){},510:function(e,t,n){},513:function(e,t,n){},514:function(e,t,n){},519:function(e,t,n){},533:function(e,t,n){},534:function(e,t,n){},535:function(e,t,n){},536:function(e,t,n){},553:function(e,t,n){},554:function(e,t,n){"use strict";n.r(t);var a,r,o,c,l,i=n(0),u=n.n(i),s=n(7),d=n.n(s),h=n(31),m=n(67),f=n(299),g=n(11),p=n(52),b=n(9),E=n(44),O=Object(b.a)("SET_NOTIFICATION"),v=Object(b.a)("RESET_NOTIFICATION"),C=Object(b.a)("REQUEST_MODEL"),y=Object(b.a)("SET_MODEL"),S=Object(b.a)("CHANGE_MODEL_NAME"),j=Object(b.a)("ADD_THING"),D=Object(b.a)("DELETE_THING"),k=Object(b.a)("ADD_SIMULATION_SENSOR"),T=Object(b.a)("ADD_SIMULATION_ACTUATOR"),A=Object(b.a)("DELETE_SIMULATION_SENSOR"),R=Object(b.a)("DELETE_SIMULATION_ACTUATOR"),I=Object(b.a)("CHANGE_STATUS_SENSOR"),w=Object(b.a)("CHANGE_STATUS_ACTUATOR"),x=Object(b.a)("UPLOAD_MODEL"),M=Object(b.a)("UPLOAD_MODEL_OK"),_=Object(b.a)("SEND_DEPLOY_START"),N=Object(b.a)("DEPLOY_START_OK"),F=Object(b.a)("SEND_DEPLOY_STOP"),V=Object(b.a)("DEPLOY_STOP_OK"),U=Object(b.a)("REQUEST_DEPLOY_STATUS"),P=Object(b.a)("SET_DEPLOY_STATUS"),L=Object(b.a)("REQUEST_LOGS"),G=Object(b.a)("REQUEST_LOGFILES"),B=Object(b.a)("REQUEST_LOGS_OK"),H=Object(b.a)("REQUEST_LOGFILES_OK"),W=Object(b.a)("REQUEST_DELETE_LOG_FILE"),Y=Object(b.a)("RESET_MODEL"),K=Object(b.a)("SHOW_MODAL"),q=Object(b.a)("SELECT_THING"),J=Object(b.a)("CHANGE_STATUS_THING"),Q=Object(b.a)("SELECT_SENSOR"),z=Object(b.a)("SELECT_ACTUATOR"),X=(Object(b.a)("SELECT_DATA_STORAGE"),Object(b.a)("REQUEST_STATS")),Z=Object(b.a)("REQUEST_STATS_OK"),$=n(19),ee=function(e,t,n){for(var a=t.split(".");a.length>1;){var r=a.shift();if(r.indexOf("[")>0){var o=r.split("[");r=o[0];var c=o[1].replace("]","");e[r]||(e[r]=[]),0===e[r].length?c=0:(e[r].length<=c||c<0)&&(c=e[r].length),e[r][c]||e[r].push({}),e=e[r][c]}else e[r]||(e[r]={}),e=e[r]}var l=a.shift();if(l.indexOf("[")>0){var i=l.split("[");l=i[0];var u=i[1].replace("]","");null===n?e[l]&&e[l][u]&&e[l].splice(u,1):(e[l]||(e[l]=[]),0===e[l].length?u=0:(e[l].length<=u||u<0)&&(u=e[l].length),e[l][u]?e[l][u]=n:e[l].push(n))}else e[l]=n},te=function(e){return JSON.parse(JSON.stringify(e))},ne=function(e,t){for(var n=!1,a=0;a<e.length;a++){if(e[a].id===t.id){e[a]=Object($.a)({},t),n=!0;break}}return n||e.push(t),e},ae=function(e,t){for(var n=!1,a=0;a<e.length;a++){if(e[a].id===t){e.splice(a,1),n=!0;break}}return n?e:(console.log("[ERROR] Cannot find the element: ".concat(t)),null)},re=function(e){var t=e.split("_"),n=t[t.length-1].replace(".log","");return new Date(Number(n))},oe=function(){return 1===window.location.pathname.indexOf("data-generator")},ce=function(e){return new URLSearchParams(window.location.search).get(e)},le={name:"NewModel"},ie=Object(b.b)((a={},Object(g.a)(a,y,Object(E.a)((function(e,t){return t}))),Object(g.a)(a,Y,(function(e){return le})),Object(g.a)(a,S,Object(E.a)((function(e,t){e.name=t}))),Object(g.a)(a,j,Object(E.a)((function(e,t){if(e.things){var n=ne(e.things,t);e.things=Object(p.a)(n)}else e.things=[t]}))),Object(g.a)(a,D,Object(E.a)((function(e,t){var n=ae(e.things,t);n&&(e.things=Object(p.a)(n))}))),Object(g.a)(a,J,Object(E.a)((function(e,t){for(var n=0;n<e.things.length;n++)if(e.things[n].id===t)return void(e.things[n].enable=!e.things[n].enable);console.error("[ERROR] Cannot find the thing ".concat(t))}))),Object(g.a)(a,k,Object(E.a)((function(e,t){var n=t.thingID,a=t.sensor,r=!1;if(e.things)for(var o=0;o<e.things.length;o++)if(e.things[o].id===n){r=!0;var c=ne(e.things[o].sensors,a);e.things[o].sensors=Object(p.a)(c);break}if(r){if(e.sensors){var l=ae(e.sensors,a.id);l&&(e.sensors=Object(p.a)(l))}}else{e.sensors||(e.sensors=[]);var i=ne(e.sensors,a);e.sensors=Object(p.a)(i)}}))),Object(g.a)(a,T,Object(E.a)((function(e,t){var n=t.thingID,a=t.actuator,r=!1;if(e.things)for(var o=0;o<e.things.length;o++)if(e.things[o].id===n){r=!0;var c=ne(e.things[o].actuators,a);e.things[o].actuators=Object(p.a)(c);break}if(r){if(e.actuators){var l=ae(e.actuators,a.id);l&&(e.actuators=Object(p.a)(l))}}else{e.actuators||(e.actuators=[]);var i=ne(e.actuators,a);e.actuators=Object(p.a)(i)}}))),Object(g.a)(a,A,Object(E.a)((function(e,t){var n=t.sensorID,a=t.thingID;if(a){for(var r=!1,o=0;o<e.things.length;o++)if(e.things[o].id===a){r=!0;var c=ae(e.things[o].sensors,n);c&&(e.things[o].sensors=Object(p.a)(c));break}r||console.log("[ERROR] Cannot remove ".concat(n," from ").concat(a))}else{var l=ae(e.sensors,n);l&&(e.sensors=Object(p.a)(l))}}))),Object(g.a)(a,I,Object(E.a)((function(e,t){var n=t.sensorID,a=t.thingID;if(a){for(var r=0;r<e.things.length;r++)if(e.things[r].id===a){for(var o=0;o<e.things[r].sensors.length;o++)if(e.things[r].sensors[o].id===n)return void(e.things[r].sensors[o].enable=!e.things[r].sensors[o].enable);break}console.log("[ERROR] Cannot change status of sensor ".concat(n," in ").concat(a))}else{if(e.sensors)for(var c=0;c<e.sensors.length;c++)if(e.sensors[c].id===n)return void(e.sensors[c].enable=!e.sensors[c].enable);console.log("[ERROR] Cannot change status of sensor ".concat(n," in ").concat(a))}}))),Object(g.a)(a,R,Object(E.a)((function(e,t){var n=t.actuatorID,a=t.thingID;if(a){for(var r=!1,o=0;o<e.things.length;o++)if(e.things[o].id===a){r=!0;var c=ae(e.things[o].actuators,n);c&&(e.things[o].actuators=Object(p.a)(c));break}r||console.log("[ERROR] Cannot remove ".concat(n," from ").concat(a))}else{var l=ae(e.actuators,n);l&&(e.actuators=Object(p.a)(l))}}))),Object(g.a)(a,w,Object(E.a)((function(e,t){var n=t.actuatorID,a=t.thingID;if(a){for(var r=0;r<e.things.length;r++)if(e.things[r].id===a){for(var o=0;o<e.things[r].actuators.length;o++)if(e.things[r].actuators[o].id===n)return void(e.things[r].actuators[o].enable=!e.things[r].actuators[o].enable);break}console.log("[ERROR] Cannot change status of actuator ".concat(n," in ").concat(a))}else{if(e.actuators)for(var c=0;c<e.actuators.length;c++)if(e.actuators[c].id===n)return void(e.actuators[c].enable=!e.actuators[c].enable);console.log("[ERROR] Cannot change status of actuator ".concat(n," in ").concat(a))}}))),a),le),ue=Object(b.b)((r={},Object(g.a)(r,x,(function(e){return!0})),Object(g.a)(r,C,(function(e){return!0})),Object(g.a)(r,F,(function(e){return!0})),Object(g.a)(r,_,(function(e){return!0})),Object(g.a)(r,O,(function(e){return!1})),Object(g.a)(r,y,(function(e){return!1})),Object(g.a)(r,M,(function(e){return!1})),Object(g.a)(r,V,(function(e){return!1})),Object(g.a)(r,N,(function(e){return!1})),Object(g.a)(r,L,(function(e){return!0})),Object(g.a)(r,B,(function(e){return!1})),r),!1),se=Object(b.b)((o={},Object(g.a)(o,O,(function(e,t){return{type:t.type,message:t.message}})),Object(g.a)(o,v,(function(e){return null})),Object(g.a)(o,j,(function(e,t){return{type:"success",message:"Thing ".concat(t.id," has been added!")}})),Object(g.a)(o,D,(function(e,t){return{type:"success",message:"Thing ".concat(t," has been removed!")}})),Object(g.a)(o,k,(function(e,t){var n=t.sensor,a=t.thingID;return{type:"success",message:"Sensor ".concat(n.id," has been added ").concat(a?"into Thing ".concat(a):"","!")}})),Object(g.a)(o,A,(function(e,t){var n=t.sensorID,a=t.thingID;return{type:"success",message:"Sensor ".concat(n," has been removed").concat(a?"from Thing ".concat(a):"","!")}})),Object(g.a)(o,T,(function(e,t){var n=t.actuator,a=t.thingID;return{type:"success",message:"Actuator ".concat(n.id," has been added ").concat(a?"into Thing ".concat(a):"","!")}})),Object(g.a)(o,R,(function(e,t){var n=t.actuatorID,a=t.thingID;return{type:"success",message:"Actuator ".concat(n," has been removed").concat(a?"from Thing ".concat(a):"","!")}})),o),null),de=Object(b.b)((c={},Object(g.a)(c,B,(function(e,t){return Object($.a)(Object($.a)({},e),{},{logs:t})})),Object(g.a)(c,H,(function(e,t){return Object($.a)(Object($.a)({},e),{},{logFiles:t})})),Object(g.a)(c,W,Object(E.a)((function(e,t){t.isDG;var n=t.logFile,a=e.logFiles.indexOf(n);a>-1&&e.logFiles.splice(a,1)}))),c),{logs:null,logFiles:[]}),he=Object(b.b)((l={},Object(g.a)(l,K,(function(e,t){return Object($.a)(Object($.a)({},e),{},{formID:t})})),Object(g.a)(l,q,(function(e,t){return Object($.a)(Object($.a)({},e),{},{selectedThing:t})})),Object(g.a)(l,Q,(function(e,t){return Object($.a)(Object($.a)({},e),{},{selectedSensor:t})})),Object(g.a)(l,z,(function(e,t){return Object($.a)(Object($.a)({},e),{},{selectedActuator:t})})),l),{formID:null,selectedThing:null,selectedSensor:null,selectedActuator:null,dataStorage:null}),me=Object(b.b)(Object(g.a)({},P,(function(e,t){return t})),!1),fe=Object(b.b)(Object(g.a)({},Z,(function(e,t){return t})),[]),ge=Object(m.c)({model:ie,stats:fe,logs:de,notify:se,requesting:ue,editingForm:he,deployStatus:me}),pe=n(6),be=n.n(pe),Ee=n(12),Oe=n(72),ve=function(){var e=Object(Oe.a)(be.a.mark((function e(t){var n,a,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("","/api/").concat(t,"/model"),e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw r.error;case 9:return e.abrupt("return",r.model);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(Oe.a)(be.a.mark((function e(t,n){var a,r,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("","/api/").concat(t,"/model"),e.next=3,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:n})});case 3:return r=e.sent,e.next=6,r.json();case 6:if(!(o=e.sent).error){e.next=9;break}throw o.error;case 9:return e.abrupt("return",o.model);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ye=function(){var e=Object(Oe.a)(be.a.mark((function e(t,n){var a,r,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("","/api/").concat(t,"/logs/").concat(n),e.next=3,fetch(a);case 3:return r=e.sent,e.next=6,r.json();case 6:if(!(o=e.sent).error){e.next=9;break}throw o.error;case 9:return e.abrupt("return",o.content);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(){var e=Object(Oe.a)(be.a.mark((function e(t){var n,a,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("","/api/").concat(t,"/stats"),e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw r.error;case 9:return e.abrupt("return",r.stats);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(Oe.a)(be.a.mark((function e(t,n){var a,r,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("","/api/").concat(t,"/logs/").concat(n),e.next=3,fetch(a,{method:"POST"});case 3:return r=e.sent,e.next=6,r.json();case 6:if(!(o=e.sent).error){e.next=9;break}throw o.error;case 9:return e.abrupt("return",o.result);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),De=function(){var e=Object(Oe.a)(be.a.mark((function e(t){var n,a,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("","/api/").concat(t,"/logs"),e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw r.error;case 9:return e.abrupt("return",r.files);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(Oe.a)(be.a.mark((function e(t,n){var a,r,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("","/api/").concat(t,"/deploy"),e.next=3,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:n})});case 3:return r=e.sent,e.next=6,r.json();case 6:if(!(o=e.sent).error){e.next=9;break}throw o.error;case 9:return e.abrupt("return",o.deployStatus);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Te=function(){var e=Object(Oe.a)(be.a.mark((function e(t){var n,a,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("","/api/").concat(t,"/stop"),e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw r.error;case 9:return e.abrupt("return",r.deployStatus);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(Oe.a)(be.a.mark((function e(t){var n,a,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("","/api/").concat(t,"/status"),e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw r.error;case 9:return e.abrupt("return",r.deployStatus);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=be.a.mark(we),Ie=be.a.mark(xe);function we(e){var t,n;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload?"data-generator":"simulation",a.next=4,Object(Ee.b)((function(){return ve(t)}));case 4:return n=a.sent,a.next=7,Object(Ee.c)(y(n));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(Ee.c)(O({type:"error",message:a.t0}));case 13:case"end":return a.stop()}}),Re,null,[[0,9]])}function xe(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.e)("REQUEST_MODEL",we);case 2:case"end":return e.stop()}}),Ie)}var Me=xe,_e=be.a.mark(Ve),Ne=be.a.mark(Ue),Fe=function(e){return e.model};function Ve(e){var t,n,a;return be.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload?"data-generator":"simulation",r.next=4,Object(Ee.d)(Fe);case 4:if(!(n=r.sent)){r.next=15;break}return r.next=8,Object(Ee.b)((function(){return Ce(t,n)}));case 8:return a=r.sent,r.next=11,Object(Ee.c)(M(a.data));case 11:return r.next=13,Object(Ee.c)(O({type:"success",message:"Model ".concat(n.name," has been updated!")}));case 13:r.next=16;break;case 15:throw Error("Undefined model");case 16:r.next=22;break;case 18:return r.prev=18,r.t0=r.catch(0),r.next=22,Object(Ee.c)(O({type:"error",message:r.t0}));case 22:case"end":return r.stop()}}),_e,null,[[0,18]])}function Ue(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.e)("UPLOAD_MODEL",Ve);case 2:case"end":return e.stop()}}),Ne)}var Pe=Ue,Le=be.a.mark(Ye),Ge=be.a.mark(Ke),Be=be.a.mark(qe),He=be.a.mark(Je),We=function(e){return e.model};function Ye(e){var t,n,a;return be.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload?"data-generator":"simulation",r.next=4,Object(Ee.d)(We);case 4:return n=r.sent,r.next=7,Object(Ee.b)((function(){return ke(t,n)}));case 7:return a=r.sent,r.next=10,Object(Ee.c)(N());case 10:return r.next=12,Object(Ee.c)(P(a));case 12:return r.next=14,Object(Ee.c)(O({type:"success",message:"".concat(t.toUpperCase()," has been started!")}));case 14:r.next=20;break;case 16:return r.prev=16,r.t0=r.catch(0),r.next=20,Object(Ee.c)(O({type:"error",message:r.t0}));case 20:case"end":return r.stop()}}),Le,null,[[0,16]])}function Ke(e){var t;return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload?"data-generator":"simulation",n.next=4,Object(Ee.b)((function(){return Te(t)}));case 4:return n.next=6,Object(Ee.c)(V());case 6:return n.next=8,Object(Ee.c)(P(null));case 8:return n.next=10,Object(Ee.c)(O({type:"success",message:"".concat(t.toUpperCase()," has been stopped!")}));case 10:n.next=16;break;case 12:return n.prev=12,n.t0=n.catch(0),n.next=16,Object(Ee.c)(O({type:"error",message:n.t0}));case 16:case"end":return n.stop()}}),Ge,null,[[0,12]])}function qe(e){var t,n;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload?"data-generator":"simulation",a.next=4,Object(Ee.b)((function(){return Ae(t)}));case 4:return n=a.sent,a.next=7,Object(Ee.c)(P(n));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(Ee.c)(O({type:"error",message:a.t0}));case 13:case"end":return a.stop()}}),Be,null,[[0,9]])}function Je(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.e)("SEND_DEPLOY_START",Ye);case 2:return e.next=4,Object(Ee.e)("SEND_DEPLOY_STOP",Ke);case 4:return e.next=6,Object(Ee.e)("REQUEST_DEPLOY_STATUS",qe);case 6:case"end":return e.stop()}}),He)}var Qe=Je,ze=be.a.mark(et),Xe=be.a.mark(tt),Ze=be.a.mark(nt),$e=be.a.mark(at);function et(e){var t,n,a;return be.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload,n=t?"data-generator":"simulation",r.next=5,Object(Ee.b)((function(){return De(n)}));case 5:return a=r.sent,r.next=8,Object(Ee.c)(H(a));case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r.catch(0),r.next=14,Object(Ee.c)(O({type:"error",message:r.t0}));case 14:case"end":return r.stop()}}),ze,null,[[0,10]])}function tt(e){var t,n,a,r,o;return be.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,n=t.isDG,a=t.logFile,r=n?"data-generator":"simulation",c.next=5,Object(Ee.b)((function(){return ye(r,a)}));case 5:return o=c.sent,c.next=8,Object(Ee.c)(B(o));case 8:c.next=14;break;case 10:return c.prev=10,c.t0=c.catch(0),c.next=14,Object(Ee.c)(O({type:"error",message:c.t0}));case 14:case"end":return c.stop()}}),Xe,null,[[0,10]])}function nt(e){var t,n,a,r;return be.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,t=e.payload,n=t.isDG,a=t.logFile,r=n?"data-generator":"simulation",o.next=5,Object(Ee.b)((function(){return je(r,a)}));case 5:o.next=11;break;case 7:return o.prev=7,o.t0=o.catch(0),o.next=11,Object(Ee.c)(O({type:"error",message:o.t0}));case 11:case"end":return o.stop()}}),Ze,null,[[0,7]])}function at(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.e)("REQUEST_LOGS",tt);case 2:return e.next=4,Object(Ee.e)("REQUEST_LOGFILES",et);case 4:return e.next=6,Object(Ee.e)("REQUEST_DELETE_LOG_FILE",nt);case 6:case"end":return e.stop()}}),$e)}var rt=at,ot=be.a.mark(lt),ct=be.a.mark(it);function lt(e){var t,n,a;return be.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload.isDG,n=t?"data-generator":"simulation",r.next=5,Object(Ee.b)((function(){return Se(n)}));case 5:return a=r.sent,r.next=8,Object(Ee.c)(Z(a));case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r.catch(0),r.next=14,Object(Ee.c)(O({type:"error",message:r.t0}));case 14:case"end":return r.stop()}}),ot,null,[[0,10]])}function it(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.e)("REQUEST_STATS",lt);case 2:case"end":return e.stop()}}),ct)}var ut=it,st=be.a.mark(dt);function dt(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.a)([Me(),Pe(),Qe(),rt(),ut()]);case 2:case"end":return e.stop()}}),st)}var ht=dt,mt=function(){var e=Object(f.a)(),t=Object(m.e)(ge,Object(m.d)(Object(m.a)(e),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));return e.run(ht),t},ft=(n(311),n(558)),gt=n(294),pt=n(91),bt=n(209),Et=n.n(bt),Ot=n(27),vt=n(28),Ct=n(30),yt=n(29),St=n(216),jt=n(566),Dt=n(125),kt=n(61),Tt=n(578),At=n(579),Rt=n(580),It=n(581),wt=n(582),xt=n(583),Mt=n(584),_t=n(585),Nt=n(586),Ft=(n(312),St.a.SubMenu),Vt=ft.a.Header,Ut=jt.a.Text,Pt=function(e){Object(Ct.a)(n,e);var t=Object(yt.a)(n);function n(){return Object(Ot.a)(this,n),t.apply(this,arguments)}return Object(vt.a)(n,[{key:"onUpload",value:function(e){var t=this,n=new FileReader;n.onloadend=function(){try{var e=JSON.parse(n.result);t.props.setNewModel(e)}catch(a){t.props.setNotification({type:"error",message:a})}},n.readAsText(e[0])}},{key:"exportModel",value:function(e){if(e){var t=JSON.stringify(e),n=new Blob([t],{type:"text/json"}),a=URL.createObjectURL(n),r=document.createElement("a");r.download="".concat(e.name.replace(/ /g,""),".json"),r.href=a,r.click()}}},{key:"render",value:function(){var e=this,t=this.props,n=t.resetEditor,a=t.startDeploy,r=t.stopDeploy,o=t.deployStatus,c=t.model,l=oe(),i=l?"/img/logo-data-generator.png":"/img/logo-simulation.png";return u.a.createElement(Vt,null,u.a.createElement(Dt.a,null,u.a.createElement(kt.a,{span:4},u.a.createElement("a",{href:"/"},u.a.createElement("img",{src:i,className:"logo",alt:"Logo",style:{maxWidth:"250px",objectFit:"contain"}}))),u.a.createElement(kt.a,{span:14,push:6},u.a.createElement(St.a,{theme:"dark",mode:"horizontal",style:{lineHeight:"64px"}},u.a.createElement(Ft,{title:u.a.createElement("a",{className:"submenu-title-wrapper",href:l?"/data-generator":"/"},u.a.createElement(Tt.a,null),"Model")},u.a.createElement(St.a.Item,{key:"model:1",onClick:function(){return e.inputFileDOM.click()}},u.a.createElement(At.a,null)," Import Model"),u.a.createElement(St.a.Item,{key:"model:2",onClick:function(){return e.exportModel(c)}},u.a.createElement(Rt.a,null),"Export Model"),u.a.createElement(St.a.Item,{key:"model:3",onClick:n},u.a.createElement(It.a,null),"Reset Editor")),u.a.createElement(Ft,{title:u.a.createElement("span",{className:"submenu-title-wrapper"},u.a.createElement(wt.a,null),l?"Generate":"Simulate",o?u.a.createElement(xt.a,{spin:!0}):null)},u.a.createElement(St.a.Item,{key:"deploy:1",onClick:function(){return a(l)}},u.a.createElement(Mt.a,null),l?"Generate":"Simulate"),u.a.createElement(St.a.Item,{key:"deploy:2",onClick:function(){return r(l)}},u.a.createElement(_t.a,null),"Terminate")),u.a.createElement(St.a.Item,{key:"3"},u.a.createElement("a",{href:l?"/data-generator/logs":"/logs",rel:"noopener noreferrer",target:"_blank"},u.a.createElement(Nt.a,null),"Logs")),u.a.createElement(St.a.Item,{key:"4"},u.a.createElement("a",{href:l?"/":"/data-generator",rel:"noopener noreferrer",target:"_blank"},u.a.createElement(Rt.a,null),u.a.createElement(Ut,{style:{color:"#ffff00fc"}},l?"Simulation":"Data Generator")))))),u.a.createElement("input",{type:"file",onChange:function(t){return e.onUpload(t.target.files)},ref:function(t){e.inputFileDOM=t},style:{display:"none"},accept:".json",multiple:!1}))}}]),n}(i.Component),Lt=Object(h.b)((function(e){return{requesting:e.requesting,model:e.model,deployStatus:e.deployStatus}}),(function(e){return{setNotification:function(t){var n=t.type,a=t.message;return e(O({type:n,message:a}))},setNewModel:function(t){e(y(t))},resetEditor:function(){e(Y())},startDeploy:function(t){return e(_(t))},stopDeploy:function(t){return e(F(t))},viewLogs:function(){e(G())}}}))(Pt),Gt=n(273),Bt=n.n(Gt),Ht=ft.a.Footer,Wt=function(){return u.a.createElement(Ht,{style:{textAlign:"center"}},"ENACT \xa9",(new Date).getFullYear()," Created by"," ",u.a.createElement("a",{href:"https://www.montimage.com"},"Montimage"),". Version ",Bt.a)},Yt=n(69),Kt=n(43),qt=n(565),Jt=(n(379),function(e){var t=e.visible,n=e.title,a=e.footer,r=e.onCancel,o=e.children;return u.a.createElement(qt.a,{visible:t,title:n,footer:a,onCancel:r},o)}),Qt=n(568),zt=n(576),Xt=n(575),Zt=function(e){var t=e.label,n=e.defaultValue,a=e.onChange,r=e.placeholder;return u.a.createElement(Qt.a.Item,{label:t},n?u.a.createElement(Xt.a,{defaultValue:n,onChange:function(e){return a(e.target.value)}}):u.a.createElement(Xt.a,{onChange:function(e){return a(e.target.value)},placeholder:r}))},$t=n(141),en=function(e){var t=e.label,n=e.defaultValue,a=e.onChange,r=e.options;return u.a.createElement(Qt.a.Item,{label:t},u.a.createElement($t.a,{defaultValue:n||(r?r[0]:null),onChange:function(e){return a(e)}},r.map((function(e){return u.a.createElement($t.a.Option,{value:e,key:e},e)}))))},tn=n(572),nn=function(e){var t=e.label,n=e.defaultValue,a=e.min,r=e.max,o=e.onChange,c=e.placeholder;return u.a.createElement(Qt.a.Item,{label:t},n?u.a.createElement(tn.a,{min:a,max:r,defaultValue:n,onChange:function(e){return o(e)},placeholder:c}):u.a.createElement(tn.a,{min:a,max:r,onChange:function(e){return o(e)},placeholder:c}))},an=n(569),rn=n(124),on=n.n(rn),cn=an.a.RangePicker,ln=function(e){var t=e.label,n=e.onChange,a=e.defaultValue,r=on()(),o=on()();return a&&2===a.length&&(r=on()(a[0]),o=on()(a[1])),u.a.createElement(Qt.a.Item,{label:t},u.a.createElement(cn,{defaultValue:[r,o],showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",onChange:function(e,t){return n([new Date(t[0]).getTime(),new Date(t[1]).getTime()])}}))},un=n(559),sn=function(e){var t=e.label,n=e.checked,a=e.onChange,r=e.checkedChildren,o=e.unCheckedChildren;return u.a.createElement(Qt.a.Item,{label:t},u.a.createElement(un.a,{onChange:function(e){return a(e)},checkedChildren:r,unCheckedChildren:o,checked:n}))},dn=n(573),hn=function(e){var t=e.label,n=e.defaultValue,a=e.onChange,r=e.options;return u.a.createElement(Qt.a.Item,{label:t},u.a.createElement(dn.a.Group,{options:r,defaultValue:n,onChange:a}))},mn=n(564),fn=n(563),gn=function(e){var t=e.label,n=e.items,a=e.onChange;return u.a.createElement(Qt.a.Item,{label:t},u.a.createElement(mn.a,{grid:{gutter:16,column:n.length},dataSource:n,renderItem:function(e){return u.a.createElement(mn.a.Item,null,u.a.createElement(fn.a,{size:"small",bordered:!1,title:e.title},u.a.createElement(tn.a,{onChange:function(t){return a(e.dataPath,t)},defaultValue:e.defaultValue?e.defaultValue:0,placeholder:e.title})))}}))},pn=jt.a.Paragraph,bn=function(e){var t=e.label,n=e.defaultValue,a=e.onChange;return u.a.createElement(Qt.a.Item,{label:t},u.a.createElement(pn,{editable:{onChange:function(e){a(e)}}},n))},En=function(e){var t=e.defaultValue,n=e.dataPath,a=e.onDataChange;return u.a.createElement(u.a.Fragment,null,u.a.createElement(Zt,{label:"User",defaultValue:t.user,onChange:function(e){return a("".concat(n?"".concat(n,"."):"","user"),e)},placeholder:"Username"}),u.a.createElement(Zt,{label:"Password",defaultValue:t.password,onChange:function(e){return a("".concat(n?"".concat(n,"."):"","password"),e)},placeholder:"Password"}),u.a.createElement(Zt,{label:"Database",defaultValue:t.dbname,onChange:function(e){return a("".concat(n?"".concat(n,"."):"","dbname"),e)},placeholder:"Database name"}))},On=n(567),vn=On.a.Panel,Cn=function(e){var t=e.title,n=e.children,a=e.bordered,r=void 0===a||a,o=e.active;return u.a.createElement(On.a,{accordion:!0,style:{margin:"10px"},defaultActiveKey:o?["1"]:null,bordered:r},u.a.createElement(vn,{header:t,key:"1"},n))},yn=function(e){var t=e.defaultValue,n=e.dataPath,a=e.onDataChange,r=e.type;return u.a.createElement(Cn,{title:"Connection Configuration",bordered:!1,active:!0},u.a.createElement(Zt,{label:"Host",defaultValue:t.host,onChange:function(e){return a("".concat(n?"".concat(n,"."):"","host"),e)}}),u.a.createElement(nn,{label:"Port",min:1023,max:65535,defaultValue:t.port,onChange:function(e){return a("".concat(n?"".concat(n,"."):"","port"),e)}}),"MONGODB"===r&&u.a.createElement(u.a.Fragment,null,u.a.createElement(En,{defaultValue:t,dataPath:n,onDataChange:a})),u.a.createElement(Zt,{label:"Options",defaultValue:JSON.stringify(t.options),onChange:function(e){return a("".concat(n?"".concat(n,"."):"","options"),e)},placeholder:"Connection options in JSON format"}))},Sn=function(e){Object(Ct.a)(n,e);var t=Object(yt.a)(n);function n(e){var a;Object(Ot.a)(this,n),a=t.call(this,e);var r=oe(),o={id:"dev-id-".concat(Date.now()),name:"dev-name-".concat(Date.now()),protocol:r?"DATABASE":"MQTT",behaviours:[],timeToDown:0,connConfig:{host:"localhost",port:r?27017:1883,options:null},sensors:[],actuators:[],enable:!0};return a.state={data:e.selectedThing?te(e.selectedThing):o,error:null,isDG:oe()},a}return Object(vt.a)(n,[{key:"handleOk",value:function(){var e=this.props,t=e.addThing,n=e.showModal,a=e.selectThing,r=this.state.data,o=Object($.a)({},r),c=null;if(o.connConfig.options)try{var l=JSON.parse(o.connConfig.options);ee(o,"connConfig.options",l)}catch(i){c="Invalid option! The communication options must be in JSON format"}c?this.setState({error:c}):(t(r),n(null),a(null))}},{key:"handleCancel",value:function(){this.props.showModal(null),this.props.selectThing(null)}},{key:"handleDuplicate",value:function(){var e=this.props,t=e.addThing,n=e.showModal,a=e.selectThing,r="dev-id-".concat(Date.now()),o=Object($.a)({},this.state.data);ee(o,"id",r),ee(o,"name","New Device"),t(o),a(o),setTimeout((function(){n("THING-FORM")}),500),n(null)}},{key:"onDataChange",value:function(e,t){this.setState((function(n){var a=Object($.a)({},n.data);return ee(a,e,t),{data:a,error:null}}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.error,r=this.props.formID,o=null;return o=this.props.selectedThing?[u.a.createElement(Kt.a,{key:"duplicate",onClick:function(){return e.handleDuplicate()}},"Duplicate"),u.a.createElement(Kt.a,{key:"cancel",onClick:function(){return e.handleCancel()}},"Cancel"),u.a.createElement(Kt.a,{key:"ok",type:"primary",onClick:function(){return e.handleOk()}},"OK")]:[u.a.createElement(Kt.a,{key:"cancel",onClick:function(){return e.handleCancel()}},"Cancel"),u.a.createElement(Kt.a,{key:"ok",type:"primary",onClick:function(){return e.handleOk()}},"OK")],u.a.createElement(Jt,{title:"Device",visible:"THING-FORM"===r,onCancel:function(){return e.handleCancel()},footer:o},u.a.createElement(Qt.a,{labelCol:{span:4},wrapperCol:{span:14}},u.a.createElement(Zt,{label:"Id",defaultValue:n.id,onChange:function(t){return e.onDataChange("id",t)}}),u.a.createElement(Zt,{label:"Name",defaultValue:n.name,onChange:function(t){return e.onDataChange("name",t)}}),u.a.createElement(nn,{label:"Number of Instance",min:1,max:1e6,placeholder:"Number of instances",defaultValue:n.scale?n.scale:1,onChange:function(t){return e.onDataChange("scale",t)}}),u.a.createElement(hn,{label:"Gateway Behaviours",defaultValue:n.behaviours?n.behaviours:[],onChange:function(t){return e.onDataChange("behaviours",t)},options:["GATEWAY_DOWN"]}),n.behaviours&&n.behaviours.indexOf("GATEWAY_DOWN")>-1&&u.a.createElement(nn,{label:"Time Before Down",min:1,max:65535,defaultValue:n.timeToDown?n.timeToDown:10,onChange:function(t){return e.onDataChange("timeToDown",t)}}),u.a.createElement("span",null,"Communication detail"),u.a.createElement("p",null),this.state.isDG?u.a.createElement(yn,{defaultValue:n.connConfig,dataPath:"connConfig",onDataChange:function(t,n){return e.onDataChange(t,n)},type:"MONGODB"}):u.a.createElement(u.a.Fragment,null,u.a.createElement(en,{label:"Protocol",defaultValue:n.protocol,onChange:function(t){return e.onDataChange("protocol",t)},options:["MQTT","STOMP"]}),u.a.createElement(yn,{defaultValue:n.connConfig,dataPath:"connConfig",onDataChange:function(t,n){return e.onDataChange(t,n)},type:n.protocol})),u.a.createElement(sn,{label:"Enable",onChange:function(t){return e.onDataChange("enable",t)},checked:!!n.enable,checkedChildren:"On",unCheckedChildren:"Off"})),a&&u.a.createElement(zt.a,{message:a,type:"error"}))}}]),n}(i.Component),jn=Object(h.b)((function(e){var t=e.editingForm,n=e.model;return{formID:t.formID,selectedThing:t.selectedThing,things:n.things}}),(function(e){return{showModal:function(t){return e(K(t))},deleteThing:function(t){return e(D(t))},addThing:function(t){return e(j(t))},selectThing:function(t){return e(q(t))}}}))(Sn),Dn=(n(509),jn),kn=function(e){var t=e.dataPath,n=e.dataSource,a=e.onDataChange;return u.a.createElement(u.a.Fragment,null,u.a.createElement(yn,{defaultValue:n.connConfig,dataPath:"".concat(t,".connConfig"),onDataChange:function(e,t){return a(e,t)},type:"MONGODB"}),u.a.createElement(Zt,{label:"sensor-id",defaultValue:n.devId,onChange:function(e){return a("".concat(t,".devId"),e)}}),u.a.createElement(ln,{label:"Time Range",defaultValue:[n.startTime?n.startTime:Date.now(),n.endTime?n.endTime:Date.now()],onChange:function(e){a("".concat(t,".startTime"),e[0]),a("".concat(t,".endTime"),e[1])}}))},Tn=(n(510),["AB_FIX_VALUE","AB_INVALID_VALUE","NORMAL_BEHAVIOUR"]),An=function(e){var t=e.dataPath,n=e.defaultValue,a=e.onChange,r=e.behaviours,o=e.children;return u.a.createElement(Cn,{title:n.key},u.a.createElement(Zt,{label:"Resource Id",defaultValue:n.resourceId,onChange:function(e){return a("".concat(t,".resourceId"),e)},placeholder:"Optional"}),u.a.createElement(Zt,{label:"key",defaultValue:n.key,onChange:function(e){return a("".concat(t,".key"),e)},placeholder:"Require"}),u.a.createElement(Zt,{label:"unit",defaultValue:n.unit,onChange:function(e){return a("".concat(t,".unit"),e)},placeholder:"Unit of the measurement"}),u.a.createElement(hn,{label:"Behaviours",defaultValue:n.behaviours,onChange:function(e){return a("".concat(t,".behaviours"),e)},options:r?Tn.concat(r):Tn}),o,u.a.createElement(Kt.a,{type:"danger",onClick:function(){return a(t,null)}},"Remove"))},Rn=function(e){var t=e.dataPath,n=e.defaultValue,a=e.onChange;return u.a.createElement(u.a.Fragment,null,u.a.createElement(An,{dataPath:t,defaultValue:n,onChange:function(e,t){return a(e,t)}},u.a.createElement(nn,{label:"Init Value",min:1,max:65535,defaultValue:n.initValue,onChange:function(e){return a("".concat(t,".initValue"),e)}}),u.a.createElement(gn,{label:"Energy",items:[{title:"Consum",dataPath:"".concat(t,".consumInOnePeriod"),defaultValue:n.consumInOnePeriod},{title:"Low",dataPath:"".concat(t,".low"),defaultValue:n.low},{title:"Slow Down Rate",dataPath:"".concat(t,".slowDownRate"),defaultValue:n.slowDownRate}],onChange:function(e,t){return a(e,t)}})))},In=function(e){var t=e.dataPath,n=e.defaultValue,a=e.onChange;return u.a.createElement(u.a.Fragment,null,u.a.createElement(An,{dataPath:t,defaultValue:n,onChange:function(e,t){return a(e,t)}},u.a.createElement(sn,{label:"Init Value",onChange:function(e){return a("".concat(t,".initValue"),e)},checked:!!n.initValue,checkedChildren:"True",unCheckedChildren:"False"})))},wn=function(e){var t=e.dataPath,n=e.defaultValue,a=e.onChange;return u.a.createElement(u.a.Fragment,null,u.a.createElement(An,{dataPath:t,defaultValue:n,onChange:function(e,t){return a(e,t)}},u.a.createElement(en,{label:"Init Value",defaultValue:n.initValue,onChange:function(e){return a("".concat(t,".initValue"),e)},options:n.values}),u.a.createElement(Zt,{label:"Value",defaultValue:JSON.stringify(n.values),onChange:function(e){return a("".concat(t,".values"),JSON.parse(e))},placeholder:"List of value should be separated by comma (,)"})))},xn={min:0,max:100,regularMin:0,regularMax:100,step:2},Mn=function(e){var t=e.defaultValue,n=e.dataPath,a=e.onChange;return u.a.createElement(Cn,{title:"Value Constraints"},u.a.createElement(gn,{label:"Range",items:[{title:"Min",dataPath:"".concat(n,".min"),defaultValue:t.min},{title:"Max",dataPath:"".concat(n,".max"),defaultValue:t.max}],onChange:function(e,t){return a(e,t)}}),u.a.createElement(gn,{label:"Regular Range",items:[{title:"Regular Min",dataPath:"".concat(n,".regularMin"),defaultValue:t.regularMin},{title:"Regular Max",dataPath:"".concat(n,".regularMax"),defaultValue:t.regularMax},{title:"Step",dataPath:"".concat(n,".step"),defaultValue:t.step}],onChange:function(e,t){return a(e,t)}}))},_n=function(e){var t=e.dataPath,n=e.defaultValue,a=e.onChange;return u.a.createElement(u.a.Fragment,null,u.a.createElement(An,{dataPath:t,defaultValue:n,onChange:function(e,t){return a(e,t)},behaviours:["AB_VALUE_OUT_OF_RANGE","AB_VALUE_OUT_OF_REGULAR_RANGE","AB_VALUE_CHANGE_OUT_OF_REGULAR_STEP"]},u.a.createElement(nn,{label:"Init Value",defaultValue:n.initValue,onChange:function(e){return a("".concat(t,".initValue"),e)}}),u.a.createElement(sn,{label:"Value Constraints",onChange:function(e){return a("".concat(t,".withValueConstraints"),e)},checked:!!n.withValueConstraints,checkedChildren:"Enable",unCheckedChildren:"Disable"}),n.withValueConstraints?n.valueConstraints?u.a.createElement(Mn,{defaultValue:n.valueConstraints,dataPath:"".concat(t,".valueConstraints"),onChange:function(e,t){return a(e,t)}}):u.a.createElement(Mn,{defaultValue:xn,dataPath:"".concat(t,".valueConstraints"),onChange:function(e,t){return a(e,t)}}):u.a.createElement(u.a.Fragment,null)))},Nn=function(e){var t=e.dataPath,n=e.sources,a=e.onChange;return u.a.createElement(i.Fragment,null,n.map((function(e,n){if(e)switch(e.type){case"DATA_SOURCE_BOOLEAN":return u.a.createElement(In,{key:n,dataPath:"".concat(t,"[").concat(n,"]"),defaultValue:e,onChange:function(e,t){return a(e,t)}});case"DATA_SOURCE_ENUM":return u.a.createElement(wn,{key:n,dataPath:"".concat(t,"[").concat(n,"]"),defaultValue:e,onChange:function(e,t){return a(e,t)}});case"DATA_SOURCE_INTEGER":case"DATA_SOURCE_FLOAT":return u.a.createElement(_n,{key:n,dataPath:"".concat(t,"[").concat(n,"]"),defaultValue:e,onChange:function(e,t){return a(e,t)}})}})))},Fn=n(560),Vn=n(577),Un=n(587),Pn=function(e){var t=e.dataPath,n=e.dataSource,a=e.onDataChange,r=e.showEnergyOption,o=void 0===r||r;return u.a.createElement(u.a.Fragment,null,u.a.createElement(nn,{label:"Number of Instance",min:1,max:1e6,placeholder:"Number of instances",defaultValue:n.scale?n.scale:1,onChange:function(e){return a("".concat(t,".scale"),e)}}),u.a.createElement(nn,{label:"Time Period",min:1,max:65535,defaultValue:n.timePeriod,onChange:function(e){return a("".concat(t,".timePeriod"),e)}}),u.a.createElement(hn,{label:"Sensor Behaviours",defaultValue:n.sensorBehaviours,onChange:function(e){return a("".concat(t,".sensorBehaviours"),e)},options:["AB_LOW_ENERGY","AB_OUT_OF_ENERGY","AB_NODE_FAILED","AB_DOS_ATTACK","AB_SLOW_DOS_ATTACK","NORMAL_BEHAVIOUR"]}),n.sensorBehaviours.indexOf("AB_DOS_ATTACK")>-1&&u.a.createElement(nn,{label:"DOS attack speedup rate",min:1,max:100,defaultValue:n.dosAttackSpeedUpRate,onChange:function(e){return a("".concat(t,".dosAttackSpeedUpRate"),e)}}),n.sensorBehaviours.indexOf("AB_NODE_FAILED")>-1&&u.a.createElement(nn,{label:"Time Before Failed",min:1,max:65535,defaultValue:n.timeBeforeFailed,onChange:function(e){return a("".concat(t,".timeBeforeFailed"),e)}}),u.a.createElement(sn,{label:"IP Smart Object Format",onChange:function(e){return a("".concat(t,".isIPSOFormat"),e)},checked:!!n.isIPSOFormat,checkedChildren:"Enable",unCheckedChildren:"Disable"}),u.a.createElement(Fn.a,null,u.a.createElement("h3",null,"Measurements")),o&&u.a.createElement(u.a.Fragment,null,u.a.createElement(sn,{label:"Energy Measurement",onChange:function(e){a("".concat(t,".withEnergy"),e),e&&!n.energy&&a("".concat(t,".energy"),{type:"DATA_SOURCE_ENERGY",key:"battery",resourceId:"battery-01",initValue:1500,unit:"mA",behaviours:[],low:1e3,slowDownRate:2,consumInOnePeriod:200})},checked:!!n.withEnergy,checkedChildren:"Enable",unCheckedChildren:"Disable"}),n.withEnergy&&u.a.createElement(Rn,{dataPath:"".concat(t,".energy"),defaultValue:n.energy?n.energy:{type:"DATA_SOURCE_ENERGY",key:"battery",resourceId:"battery-01",initValue:1500,unit:"mA",behaviours:[],low:1e3,slowDownRate:2,consumInOnePeriod:200},onChange:function(e,t){return a(e,t)}})),u.a.createElement(Nn,{dataPath:"".concat(t,".sources"),sources:n.sources?n.sources:[],onChange:function(e,t){return a(e,t)}}),u.a.createElement(Vn.a,{overlay:u.a.createElement(St.a,null,u.a.createElement(St.a.Item,{key:"1",onClick:function(){var e=n.sources.length,r="".concat(t,".sources[").concat(e,"]");a(r,{type:"DATA_SOURCE_BOOLEAN",key:"your-boolean-data-key",resourceId:"boolean-measure-id",initValue:!0,unit:"",behaviours:[]})}},"Boolean Data Type"),u.a.createElement(St.a.Item,{key:"2",onClick:function(){var e=n.sources.length,r="".concat(t,".sources[").concat(e,"]");a(r,{type:"DATA_SOURCE_ENUM",key:"your-enum-data-key",resourceId:"enum-measure-id",initValue:"value1",unit:"",behaviours:[],values:["value1","value2"]})}},"Enum Data Type"),u.a.createElement(St.a.Item,{key:"3",onClick:function(){var e=n.sources.length,r="".concat(t,".sources[").concat(e,"]");a(r,{type:"DATA_SOURCE_INTEGER",key:"your-integer-data-key",resourceId:"integer-measure-id",initValue:10,unit:"",behaviours:[],valueConstraints:{min:0,max:100,regularMin:20,regularMax:80,step:1}})}},"Integer Data Type"),u.a.createElement(St.a.Item,{key:"4",onClick:function(){var e=n.sources.length,r="".concat(t,".sources[").concat(e,"]");a(r,{type:"DATA_SOURCE_FLOAT",key:"your-float-data-key",resourceId:"float-measure-id",initValue:10,unit:"",behaviours:[],valueConstraints:{min:0,max:100,regularMin:20,regularMax:80,step:1}})}},"Float Data Type")),placement:"topLeft"},u.a.createElement(Kt.a,{type:"primary",style:{margin:"20px"}},"Add New Measure ",u.a.createElement(Un.a,null))))},Ln=function(){return{connConfig:{host:"localhost",port:27017,username:null,password:null,options:null},devId:null,dbname:null,startTime:Date.now(),endTime:Date.now()}},Gn=function(){return{id:"id-".concat(Date.now()),objectId:null,name:"name-".concat(Date.now()),enable:!0,isFromDatabase:!1,topic:null,userData:null,dataSource:{timePeriod:5,scale:1,dosAttackSpeedUpRate:5,timeBeforeFailed:20,sensorBehaviours:[],withEnergy:!1,isIPSOFormat:!1,energy:null,sources:[]}}},Bn=function(e){Object(Ct.a)(n,e);var t=Object(yt.a)(n);function n(e){var a;Object(Ot.a)(this,n),a=t.call(this,e);var r=e.model,o=e.selectedSensor,c=e.selectedActuator,l=e.formID,i=[null],u=null,s="SENSOR-FORM"===l?o:"ACTUATOR-FORM"===l?c:null;if(r.things)for(var d=r.things,h=0;h<d.length;h++)if(i.push(d[h].id),null!==s&&null===u){var m=d[h],f=m.sensors,g=m.actuators;if("SENSOR-FORM"===l&&f){for(var p=0;p<f.length;p++)if(f[p].id===s.id){u=d[h].id;break}}else if("ACTUATOR-FORM"===l&&g)for(var b=0;b<g.length;b++)if(g[b].id===s.id){u=d[h].id;break}}var E=te(Ln()),O=te({timePeriod:5,scale:1,dosAttackSpeedUpRate:5,timeBeforeFailed:20,sensorBehaviours:[],withEnergy:!1,isIPSOFormat:!1,energy:null,sources:[]}),v=Gn();return s&&((v=te(s)).isFromDatabase?E=v.dataSource:O=v.dataSource),a.state={data:v,thingID:i[1],thingIDs:i,replayDS:E,generateDS:O,error:null},a}return Object(vt.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.model,n=e.selectedSensor,a=e.selectedActuator,r=e.formID,o=[null],c=null,l="SENSOR-FORM"===r?n:"ACTUATOR-FORM"===r?a:null;if(t.things)for(var i=t.things,u=0;u<i.length;u++)if(o.push(i[u].id),null!==l&&null===c){var s=i[u],d=s.sensors,h=s.actuators;if("SENSOR-FORM"===r&&d){for(var m=0;m<d.length;m++)if(d[m].id===l.id){c=i[u].id;break}}else if("ACTUATOR-FORM"===r&&h)for(var f=0;f<h.length;f++)if(h[f].id===l.id){c=i[u].id;break}}var g=te(Ln()),p=te({timePeriod:5,scale:1,dosAttackSpeedUpRate:5,timeBeforeFailed:20,sensorBehaviours:[],withEnergy:!1,isIPSOFormat:!1,energy:null,sources:[]}),b=Gn();l&&((b=te(l)).isFromDatabase?g=b.dataSource:p=b.dataSource),this.setState({data:b,thingID:c||o[1],thingIDs:o,replayDS:g,generateDS:p,error:null,isDG:!1})}},{key:"componentDidMount",value:function(){this.setState({isDG:oe()})}},{key:"onThingChange",value:function(e){this.setState({thingID:e})}},{key:"onChangeDataSource",value:function(e){e?this.setState((function(e){var t=Object($.a)({},e.data);return ee(t,"dataSource",e.replayDS),ee(t,"isFromDatabase",!0),{data:t,error:null,generateDS:e.generateDS}})):this.setState((function(e){var t=Object($.a)({},e.data);return ee(t,"dataSource",e.generateDS),ee(t,"isFromDatabase",!1),{data:t,error:null,replayDS:e.replayDS}}))}},{key:"onDataChange",value:function(e,t){this.setState((function(n){var a=Object($.a)({},n.data);return ee(a,e,t),{data:a,error:null}}))}},{key:"handleOk",value:function(){var e=this.state,t=e.thingID,n=e.data,a=this.props,r=a.formID,o=a.addSimulationSensor,c=a.addSimulationActuator,l=a.showModal;"SENSOR-FORM"===r?(o(t,n),l(null),this.props.selectSensor(null)):"ACTUATOR-FORM"===r?(c(t,n),l(null),this.props.selectActuator(null)):(console.log("[ERROR] Invalid form: ".concat(r)),this.setState({error:"[ERROR] Invalid form: ".concat(r)}))}},{key:"handleCancel",value:function(){this.props.showModal(null),this.props.selectSensor(null),this.props.selectActuator(null)}},{key:"handleDuplicate",value:function(){var e=this.state,t=e.thingID,n=e.isDG,a=this.props,r=a.formID,o=a.addSimulationSensor,c=a.addSimulationActuator,l=a.showModal,i=a.selectSensor,u=a.selectActuator;if("SENSOR-FORM"===r){var s="sensor-".concat(Date.now()),d=Object($.a)(Object($.a)({},this.state.data),{},{id:s,name:"New Sensor"});o(t,d),i(d),setTimeout((function(){l("SENSOR-FORM")}),1e3),l(null)}else if("ACTUATOR-FORM"===r){var h="act-".concat(Date.now()),m=Object($.a)(Object($.a)({},this.state.data),{},{id:h,name:"New Actuator"});n?(c(m),setTimeout((function(){l("ACTUATOR-FORM")}),1e3),u(m),l(null)):(console.log("[ERROR] Undefined tool or invalid form: ".concat(n,", ").concat(r)),this.setState({error:"[ERROR] Undefined tool or invalid form: ".concat(n,", ").concat(r)}))}else console.log("[ERROR] Invalid form: ".concat(r)),this.setState({error:"[ERROR] Invalid form: ".concat(r)})}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.error,r=t.thingID,o=t.thingIDs,c=t.isDG,l=this.props,i=l.formID,s=l.selectedActuator,d=l.selectedSensor;if(!c&&"ACTUATOR-FORM"===i)return null;var h=null;h=d&&"SENSOR-FORM"===i||s&&"ACTUATOR-FORM"===i?[u.a.createElement(Kt.a,{key:"duplicate",onClick:function(){return e.handleDuplicate()}},"Duplicate"),u.a.createElement(Kt.a,{key:"cancel",onClick:function(){return e.handleCancel()}},"Cancel"),u.a.createElement(Kt.a,{key:"ok",type:"primary",onClick:function(){return e.handleOk()}},"OK")]:[u.a.createElement(Kt.a,{key:"cancel",onClick:function(){return e.handleCancel()}},"Cancel"),u.a.createElement(Kt.a,{key:"ok",type:"primary",onClick:function(){return e.handleOk()}},"OK")];var m="SENSOR-FORM"===i,f=n.topic?n.topic:"things/".concat(r,"/sensors").concat(n.objectId?"/".concat(n.objectId):"","/").concat(n.id);return u.a.createElement(Jt,{title:"".concat(m?"Sensor":"Actuator"),visible:m||c&&"ACTUATOR-FORM"===i,onCancel:function(){return e.handleCancel()},footer:h},u.a.createElement(Qt.a,{labelCol:{span:4},wrapperCol:{span:14}},u.a.createElement(en,{label:"Device",defaultValue:r,onChange:function(t){return e.onThingChange(t)},options:o}),u.a.createElement(Zt,{label:"Instance Id",defaultValue:n.id,onChange:function(t){return e.onDataChange("id",t)},placeholder:"Identify of the device"}),u.a.createElement(Zt,{label:"Object Id",defaultValue:n.objectId,onChange:function(t){return e.onDataChange("objectId",t)},placeholder:"Identify of the type of device (IPSO Standard)"}),u.a.createElement(Zt,{label:"Name",defaultValue:n.name,onChange:function(t){return e.onDataChange("name",t)}}),!c&&u.a.createElement(bn,{label:"Topic",defaultValue:f,onChange:function(t){return e.onDataChange("topic",t)}}),u.a.createElement(Zt,{label:"User Data",defaultValue:JSON.stringify(n.userData),onChange:function(t){return e.onDataChange("userData",t)},placeholder:"User data in JSON format"}),u.a.createElement(sn,{label:"Enable",onChange:function(t){return e.onDataChange("enable",t)},checked:!!n.enable,checkedChildren:"On",unCheckedChildren:"Off"}),u.a.createElement(en,{label:"Data Source",defaultValue:n.isFromDatabase?"Replay":"Generate",onChange:function(t){e.onChangeDataSource("Replay"===t)},options:["Replay","Generate"]}),n.isFromDatabase?u.a.createElement(kn,{dataPath:"dataSource",dataSource:n.dataSource,onDataChange:function(t,n){return e.onDataChange(t,n)}}):u.a.createElement(Pn,{dataPath:"dataSource",dataSource:n.dataSource,onDataChange:function(t,n){return e.onDataChange(t,n)},showEnergyOption:!c&&"SENSOR-FORM"===i})),a&&u.a.createElement(zt.a,{message:a,type:"error"}))}}]),n}(i.Component),Hn=Object(h.b)((function(e){var t=e.editingForm,n=e.model;return{formID:t.formID,selectedSensor:t.selectedSensor,selectedActuator:t.selectedActuator,model:n}}),(function(e){return{showModal:function(t){return e(K(t))},addSimulationSensor:function(t,n){return e(k({thingID:t,sensor:n}))},addSimulationActuator:function(t,n){return e(T({thingID:t,actuator:n}))},selectActuator:function(t){return e(z(t))},selectSensor:function(t){return e(Q(t))}}}))(Bn),Wn=(n(513),Hn),Yn=function(){return{id:"act-id-".concat(Date.now()),objectId:null,name:"act-name-".concat(Date.now()),topic:null,enable:!0}},Kn=function(e){Object(Ct.a)(n,e);var t=Object(yt.a)(n);function n(e){var a;Object(Ot.a)(this,n),a=t.call(this,e);var r=e.model,o=e.selectedActuator,c=[null],l=null;if(r.things)for(var i=r.things,u=0;u<i.length;u++)if(c.push(i[u].id),null!==o&&null===l)for(var s=i[u].actuators,d=0;d<s.length;d++)if(s[d].id===o.id){l=i[u].id;break}return a.state={data:o?te(o):Yn(),thingID:l||c[0],thingIDs:c,error:null},a}return Object(vt.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.model,n=e.selectedActuator,a=[null],r=null;if(t.things)for(var o=t.things,c=0;c<o.length;c++)if(a.push(o[c].id),null!==n&&null===r)for(var l=o[c].actuators,i=0;i<l.length;i++)if(l[i].id===n.id){r=o[c].id;break}this.setState({data:n?te(n):Yn(),thingID:r||a[0],thingIDs:a,error:null})}},{key:"onThingChange",value:function(e){this.setState({thingID:e})}},{key:"onDataChange",value:function(e,t){this.setState((function(n){var a=Object($.a)({},n.data);return ee(a,e,t),{data:a,error:null}}))}},{key:"handleOk",value:function(){var e=this.state,t=e.thingID,n=e.data,a=this.props,r=a.addSimulationActuator,o=a.showModal;r(t,n),o(null),this.props.selectActuator(null)}},{key:"handleCancel",value:function(){this.props.showModal(null),this.props.selectActuator(null)}},{key:"handleDuplicate",value:function(){var e=this.state.thingID,t=this.props,n=t.addSimulationActuator,a=t.showModal,r=t.selectActuator,o="act-".concat(Date.now()),c=Object($.a)(Object($.a)({},this.state.data),{},{id:o,objectId:this.state.objectId,name:"New Actuator"});n(e,c),a(null),setTimeout((function(){r(c),a("ACTUATOR-FORM")}),300)}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.error,r=t.thingID,o=t.thingIDs,c=this.props.formID,l=null;l=this.props.selectedActuator?[u.a.createElement(Kt.a,{key:"duplicate",onClick:function(){return e.handleDuplicate()}},"Duplicate"),u.a.createElement(Kt.a,{key:"cancel",onClick:function(){return e.handleCancel()}},"Cancel"),u.a.createElement(Kt.a,{key:"ok",type:"primary",onClick:function(){return e.handleOk()}},"OK")]:[u.a.createElement(Kt.a,{key:"cancel",onClick:function(){return e.handleCancel()}},"Cancel"),u.a.createElement(Kt.a,{key:"ok",type:"primary",onClick:function(){return e.handleOk()}},"OK")];var i=n.topic?n.topic:"things/".concat(r,"/actuators").concat(n.objectId?"/".concat(n.objectId):"","/").concat(n.id,"/#"),s=oe();return u.a.createElement(Jt,{title:"Actuator",visible:"ACTUATOR-FORM"===c&&!s,onCancel:function(){return e.handleCancel()},footer:l},u.a.createElement(Qt.a,{labelCol:{span:4},wrapperCol:{span:14}},u.a.createElement(en,{label:"Device",defaultValue:r,onChange:function(t){return e.onThingChange(t)},options:o}),u.a.createElement(Zt,{label:"Instance Id",defaultValue:n.id,onChange:function(t){return e.onDataChange("id",t)}}),u.a.createElement(Zt,{label:"Object Id",defaultValue:n.objectId,onChange:function(t){return e.onDataChange("objectId",t)},placeholder:"Identify of device type (IP Smart Object Format)"}),u.a.createElement(Zt,{label:"Name",defaultValue:n.name,onChange:function(t){return e.onDataChange("name",t)}}),u.a.createElement(nn,{label:"Number of Instance",min:1,max:1e6,placeholder:"Number of instances",defaultValue:n.scale?n.scale:1,onChange:function(t){return e.onDataChange("scale",t)}}),u.a.createElement(bn,{label:"Topic",defaultValue:i,onChange:function(t){return e.onDataChange("topic",t)}}),u.a.createElement(sn,{label:"Enable",onChange:function(t){return e.onDataChange("enable",t)},checked:!!n.enable,checkedChildren:"On",unCheckedChildren:"Off"})),a&&u.a.createElement(zt.a,{message:a,type:"error"}))}}]),n}(i.Component),qn=Object(h.b)((function(e){var t=e.editingForm,n=e.model;return{formID:t.formID,selectedActuator:t.selectedActuator,model:n}}),(function(e){return{showModal:function(t){return e(K(t))},selectActuator:function(t){return e(z(t))},addSimulationActuator:function(t,n){return e(T({thingID:t,actuator:n}))}}}))(Kn),Jn=(n(514),qn),Qn=n(172),zn=n(287),Xn=n.n(zn),Zn=(n(515),{tree:"tree",view:"view",form:"form",code:"code",text:"text"}),$n=Object.values(Zn);Zn.allValues=$n;var ea=function(e){Object(Ct.a)(n,e);var t=Object(yt.a)(n);function n(e){var a;return Object(Ot.a)(this,n),(a=t.call(this,e)).htmlElementRef=null,a.jsonEditor=null,a.handleChange=a.handleChange.bind(Object(Yt.a)(a)),a.setRef=a.setRef.bind(Object(Yt.a)(a)),a.collapseAll=a.collapseAll.bind(Object(Yt.a)(a)),a.expandAll=a.expandAll.bind(Object(Yt.a)(a)),a.focus=a.focus.bind(Object(Yt.a)(a)),a}return Object(vt.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.allowedModes,n=(e.innerRef,e.htmlElementProps,e.tag,e.onChange,Object(Qn.a)(e,["allowedModes","innerRef","htmlElementProps","tag","onChange"]));this.createEditor(Object($.a)(Object($.a)({},n),{},{modes:t}))}},{key:"componentDidUpdate",value:function(e){var t=e.allowedModes,n=e.schema,a=e.name,r=e.theme,o=e.schemaRefs,c=(e.innerRef,e.htmlElementProps,e.tag,e.onChange,Object(Qn.a)(e,["allowedModes","schema","name","theme","schemaRefs","innerRef","htmlElementProps","tag","onChange"]));this.jsonEditor&&(r!==this.props.theme?this.createEditor(Object($.a)(Object($.a)({},c),{},{theme:r,modes:t})):(n===this.props.schema&&o===this.props.schemaRefs||this.jsonEditor.setSchema(n,o),a!==this.jsonEditor.getName()&&this.jsonEditor.setName(a)))}},{key:"shouldComponentUpdate",value:function(e){return e.htmlElementProps!==this.props.htmlElementProps}},{key:"componentWillUnmount",value:function(){this.jsonEditor&&(this.jsonEditor.destroy(),this.jsonEditor=null)}},{key:"componentWillReceiveProps",value:function(e){this.props.value!==e.value&&this.jsonEditor.set(e.value)}},{key:"setRef",value:function(e){this.htmlElementRef=e,this.props.innerRef&&this.props.innerRef(e)}},{key:"createEditor",value:function(e){var t=e.value,n=Object(Qn.a)(e,["value"]);this.jsonEditor&&this.jsonEditor.destroy(),this.jsonEditor=new Xn.a(this.htmlElementRef,Object($.a)({onChange:this.handleChange},n)),this.jsonEditor.set(t)}},{key:"handleChange",value:function(){if(this.props.onChange)try{""===this.jsonEditor.getText()&&this.props.onChange(null);var e=this.jsonEditor.get();this.props.value!==e&&this.props.onChange(e)}catch(t){this.err=t}}},{key:"collapseAll",value:function(){this.jsonEditor&&this.jsonEditor.collapseAll()}},{key:"expandAll",value:function(){this.jsonEditor&&this.jsonEditor.expandAll()}},{key:"focus",value:function(){this.jsonEditor&&this.jsonEditor.focus()}},{key:"render",value:function(){var e=this.props,t=e.htmlElementProps,n=e.tag;return u.a.createElement(n,Object($.a)(Object($.a)({},t),{},{ref:this.setRef}))}}]),n}(i.Component);ea.defaultProps={tag:"div",mode:Zn.tree,history:!1,search:!0,navigationBar:!0,statusBar:!0},ea.modes=Zn;var ta=n(288),na=n.n(ta),aa=(n(516),n(518),n(519),function(e){var t=e.value,n=e.onChange;return u.a.createElement(ea,{value:t,onChange:n,allowedModes:["tree","code"],ace:na.a,theme:"ace/theme/github"})}),ra=n(289),oa=n(588),ca=n(589),la=n(590),ia=n(562),ua=n(291),sa=function(e){var t=e.id,n=e.stats,a=e.children;return u.a.createElement("div",null,u.a.createElement("p",null,"Id: ",t),n.status&&u.a.createElement("p",null,"Status: ",n.status),u.a.createElement("p",null,"Started Time: ",new Date(n.startedTime).toLocaleTimeString()),u.a.createElement("p",null,"Last Activity: ",new Date(n.lastActivity).toLocaleTimeString()),a)},da=function(e){var t=e.id,n=e.stats,a=e.devType;if(!n)return u.a.createElement("div",null,u.a.createElement("p",null,"Id: ",t));switch(a){case"GATEWAY":return u.a.createElement(sa,{id:t,stats:n},u.a.createElement("p",null,"Sent: ",n.numberOfSentData),u.a.createElement("p",null,"Received: ",n.numberOfReceivedData));case"SENSOR":return u.a.createElement(sa,{id:t,stats:n},u.a.createElement("p",null,"Sent: ",n.numberOfSentData));case"ACTUATOR":return u.a.createElement(sa,{id:t,stats:n},u.a.createElement("p",null,"Received: ",n.numberOfReceivedData));default:return u.a.createElement("p",null,t)}},ha=function(e){var t=e.data,n=null;switch(t.devType){case"GATEWAY":n=u.a.createElement(oa.a,null);break;case"SENSOR":n=u.a.createElement(ca.a,null);break;case"ACTUATOR":n=u.a.createElement(la.a,null);break;default:n=u.a.createElement(oa.a,null)}return u.a.createElement(ia.a,{content:da(t),title:"".concat(t.devType,": ").concat(t.name)},u.a.createElement(ua.a,{style:{verticalAlign:"middle"},icon:n}))},ma={automaticRearrangeAfterDropNode:!1,collapsible:!1,height:400,highlightDegree:1,highlightOpacity:.2,linkHighlightBehavior:!0,maxZoom:3,minZoom:.5,nodeHighlightBehavior:!0,panAndZoom:!1,staticGraph:!1,width:800,directed:!0,node:{fontColor:"black",fontSize:10,fontWeight:"normal",highlightColor:"red",highlightFontSize:10,highlightFontWeight:"bold",highlightStrokeColor:"SAME",highlightStrokeWidth:1.5,mouseCursor:"pointer",opacity:1,renderLabel:!1,size:400,strokeColor:"none",strokeWidth:1.5,svg:"",symbolType:"circle",viewGenerator:function(e){return u.a.createElement(ha,{data:e})}},link:{color:"#d3d3d3",opacity:1,semanticStrokeWidth:!1,strokeWidth:4,fontSize:10,highlightColor:"blue",renderLabel:!0,labelProperty:function(e){return e.numberOfData}}},fa=function(e,t){if(!t||0===t.length)return null;for(var n=0;n<t.length;n++){var a=t[n];if(a.id===e)return a}return null},ga=function(e,t){var n=e.things;if(!n||0===n.length)return null;for(var a=[],r=[],o=0;o<n.length;o++){var c=n[o],l=fa(c.id,t);a.push({id:c.id,name:c.name,devType:"GATEWAY",stats:l});var i=c.sensors,u=c.actuators;if(i)for(var s=0;s<i.length;s++){var d=i[s],h="".concat(c.id,"-").concat(d.id),m=l?fa(d.id,l.sensorStats):null,f=m?m.numberOfSentData:0;a.push({id:h,name:d.name,devType:"SENSOR",stats:m}),r.push({source:h,target:c.id,numberOfData:f})}if(u)for(var g=0;g<u.length;g++){var p=u[g],b="".concat(c.id,"-").concat(p.id),E=l?fa(p.id,l.actuatorStats):null,O=E?E.numberOfReceivedData:0;E&&(E.status=l.status,E.startedTime=l.startedTime),a.push({id:b,name:p.name,devType:"ACTUATOR",stats:E}),r.push({source:c.id,target:b,numberOfData:O})}}return{nodes:a,links:r}},pa=function(e){Object(Ct.a)(n,e);var t=Object(yt.a)(n);function n(e){var a;Object(Ot.a)(this,n);var r=(a=t.call(this,e)).props,o=r.model,c=r.stats,l=ga(o,c);return a.state={data:l},a}return Object(vt.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=oe();this.props.requestStats(t),console.log(this.timerId),this.props.deployStatus&&(this.timerId=setInterval((function(){e.props.requestStats(t)}),5e3))}},{key:"componentWillReceiveProps",value:function(e){var t=oe();console.log(this.timerId);var n=e.model,a=e.stats,r=ga(n,a);this.setState({data:r}),e.deployStatus?this.timerId||(e.requestStats(t),this.timerId=setInterval((function(){e.requestStats(t)}),5e3)):this.timerId&&clearInterval(this.timerId)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerId)}},{key:"render",value:function(){var e=this.state.data;return e?(console.log(e),u.a.createElement(ra.Graph,{id:"graph-id",data:e,config:ma})):u.a.createElement("p",null,"Empty model")}}]),n}(u.a.Component),ba=Object(h.b)((function(e){return{model:e.model,stats:e.stats,deployStatus:e.deployStatus}}),(function(e){return{requestStats:function(t){return e(X(t))}}}))(pa),Ea=n(570),Oa=function(e){var t=e.list,n=e.editHandler,a=e.deleteHandler,r=e.itemAvatar,o=e.changeStatus;return u.a.createElement(mn.a,{itemLayout:"horizontal",dataSource:t,renderItem:function(e){return u.a.createElement(mn.a.Item,{actions:[u.a.createElement(Kt.a,{key:"item-edit",size:"small",onClick:function(){return n(e)}},"Edit"),u.a.createElement(Kt.a,{key:"item-delete",size:"small",onClick:function(){return a(e)},type:"danger"},"Delete"),u.a.createElement(un.a,{key:"item-enable",onChange:function(){return o(e)},checkedChildren:"Enable",unCheckedChildren:"Disable",checked:e.enable})]},u.a.createElement(Ea.a,{avatar:!0,title:!1,loading:e.loading},u.a.createElement(mn.a.Item.Meta,{avatar:u.a.createElement(ua.a,null,r),title:u.a.createElement("span",{onClick:function(){return n(e)},style:{cursor:"pointer"}},e.name?e.name:e.id),description:"Id: ".concat(e.id).concat(e.name?"- name: ".concat(e.name):"","- enable: ").concat(!!e.enable)})))}})},va=n(574),Ca=function(e){var t=e.thing,n=e.actions,a=n.showModal,r=n.selectThing,o=n.deleteThing,c=n.changeStatusThing,l=n.selectSensor,i=n.deleteSensor,s=n.changeStatusSensor,d=n.selectActuator,h=n.deleteActuator,m=n.changeStatusActuator;return u.a.createElement(Cn,{title:"Thing ".concat(t.id)},u.a.createElement(mn.a.Item,{actions:[u.a.createElement(Kt.a,{key:"thing-edit",size:"small",onClick:function(){r(t),a("THING-FORM")}},"Edit"),u.a.createElement(Kt.a,{key:"thing-delete",size:"small",onClick:function(){o(t.id)},type:"danger"},"Delete"),u.a.createElement(un.a,{key:"thing-enable",onChange:function(e){c(t.id)},checkedChildren:"Enable",unCheckedChildren:"Disable",checked:t.enable})]},u.a.createElement(mn.a.Item.Meta,{avatar:u.a.createElement(ua.a,null,u.a.createElement(oa.a,null)),title:u.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){r(t),a("THING-FORM")}},t.name?t.name:t.id),description:"Id: ".concat(t.id).concat(t.name?"- name: ".concat(t.name):"","- enable: ").concat(!!t.enable)})),u.a.createElement(va.a,{className:"site-page-header",title:"Connection",subTitle:"Protocol: ".concat(t.protocol)}),u.a.createElement("p",null,"Host: ",u.a.createElement("strong",null,t.connConfig.host)),u.a.createElement("p",null,"Port: ",u.a.createElement("strong",null,t.connConfig.port)),t.sensors&&u.a.createElement(u.a.Fragment,null,u.a.createElement(va.a,{className:"site-page-header",title:"Sensors",subTitle:"Total: ".concat(t.sensors.length)}),u.a.createElement(Oa,{list:t.sensors,editHandler:function(e){l(e),a("SENSOR-FORM")},deleteHandler:function(e){i(e.id,t.id)},changeStatus:function(e){s(e.id,t.id)},itemAvatar:u.a.createElement(ca.a,null)})),t.actuators&&u.a.createElement(u.a.Fragment,null,u.a.createElement(va.a,{className:"site-page-header",title:"Actuators",subTitle:"Total: ".concat(t.actuators.length)}),u.a.createElement(Oa,{list:t.actuators,editHandler:function(e){d(e),a("ACTUATOR-FORM")},deleteHandler:function(e){h(e.id,t.id)},changeStatus:function(e){m(e.id,t.id)},itemAvatar:u.a.createElement(la.a,null)})))},ya=function(e){var t=e.things,n=e.actions;return u.a.createElement(mn.a,{itemLayout:"horizontal",dataSource:t,renderItem:function(e){return u.a.createElement(Ca,{thing:e,actions:n})}})},Sa=(n(533),jt.a.Paragraph),ja=function(e){var t=e.model,n=t.sensors,a=t.actuators,r=t.things,o=t.name,c=e.modelType,l=e.actions,i=l.showModal,s=l.selectThing,d=l.deleteThing,h=l.changeStatusThing,m=l.selectSensor,f=l.deleteSensor,g=l.changeStatusSensor,p=l.selectActuator,b=l.deleteActuator,E=l.changeStatusActuator,O=l.changeModelName;return u.a.createElement("div",null,u.a.createElement(Cn,{title:"Overview",active:!0},u.a.createElement(Sa,{editable:{onChange:function(e){return O(e)}}},o),u.a.createElement("span",null,"Type: ",u.a.createElement("strong",null,c))),r&&u.a.createElement(Cn,{title:"Things (".concat(r.length,")"),active:!0},u.a.createElement(ya,{things:r,actions:{showModal:i,selectThing:s,deleteThing:d,changeStatusThing:h,selectSensor:m,deleteSensor:f,changeStatusSensor:g,selectActuator:p,deleteActuator:b,changeStatusActuator:E}})),n&&u.a.createElement(Cn,{title:"Free Sensors (".concat(n.length,")"),active:!1},u.a.createElement(Oa,{list:n,editHandler:function(e){m(e),i("SENSOR-FORM")},deleteHandler:function(e){f(e.id,null)},changeStatus:function(e){g(e.id,null)},itemAvatar:u.a.createElement(ca.a,null)})),a&&u.a.createElement(Cn,{title:"Free Actuators (".concat(a.length,")"),active:!1},u.a.createElement(Oa,{list:a,editHandler:function(e){p(e),i("ACTUATOR-FORM")},deleteHandler:function(e){b(e.id,null)},changeStatus:function(e){E(e.id,null)},itemAvatar:u.a.createElement(la.a,null)})))},Da=n(571),ka=n(284),Ta=(n(534),ft.a.Sider),Aa=function(e){var t=e.defaultKey,n=e.items,a=e.rightSide,r=e.theme;return u.a.createElement(Ta,{className:"side-background-color",breakpoint:"lg",collapsedWidth:"0"},u.a.createElement(St.a,{mode:"inline",theme:r||"light",style:a?{height:"100%",borderRight:0}:{height:"100%",borderLeft:10},defaultSelectedKeys:["".concat(t)],defaultOpenKeys:["sub".concat(t)]},n.map((function(e){return e.action?u.a.createElement(St.a.Item,{key:e.key,onClick:e.action},e.icon,e.text):e.href?u.a.createElement(St.a.Item,{key:e.key},u.a.createElement("a",{href:e.href},e.icon,e.text)):u.a.createElement(St.a.Item,{key:e.key},e.icon,e.text)}))))},Ra=function(e){Object(Ct.a)(n,e);var t=Object(yt.a)(n);function n(){return Object(Ot.a)(this,n),t.apply(this,arguments)}return Object(vt.a)(n,[{key:"render",value:function(){var e=this.props.showModal,t=[{key:3,text:"Add Device",action:function(){return e("THING-FORM")},icon:u.a.createElement(oa.a,null)},{key:1,text:"Add Sensor",action:function(){return e("SENSOR-FORM")},icon:u.a.createElement(ca.a,null)},{key:2,text:"Add Actuator",action:function(){return e("ACTUATOR-FORM")},icon:u.a.createElement(la.a,null)}];return u.a.createElement(Aa,{rightSide:!0,items:t,theme:"dark"})}}]),n}(i.Component),Ia=Object(h.b)(null,(function(e){return{showModal:function(t){return e(K(t))}}}))(Ra),wa=n(591),xa=n(592),Ma=n(593),_a=(n(535),function(e){Object(Ct.a)(n,e);var t=Object(yt.a)(n);function n(){return Object(Ot.a)(this,n),t.apply(this,arguments)}return Object(vt.a)(n,[{key:"render",value:function(){var e=[{key:7,text:"List View",href:"?view=list",icon:u.a.createElement(wa.a,null)},{key:5,text:"JSON View",href:"?view=json",icon:u.a.createElement(xa.a,null)},{key:6,text:"Graph View",href:"?view=graph",icon:u.a.createElement(Ma.a,null)}],t=7,n=ce("view");if(n)switch(n){case"list":t=7;break;case"json":t=5;break;case"graph":t=6}return u.a.createElement(Aa,{className:"right-sider",rightSide:!1,items:e,defaultKey:t,theme:"light"})}}]),n}(i.Component)),Na=(n(536),ft.a.Content),Fa=function(e){Object(Ct.a)(n,e);var t=Object(yt.a)(n);function n(e){var a;Object(Ot.a)(this,n),a=t.call(this,e);var r=e.deployStatus,o=null,c=oe();return r&&(o="".concat(c?"Data Generator":"Simulation"," is running. Model name ").concat(r.model,". Started time: ").concat(new Date(r.startedTime))),a.state={isDG:c,isLogPage:window.location.pathname.indexOf("/logs")>-1,statusMessage:o},a}return Object(vt.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.deployStatus,n=null;t&&(n="".concat(this.state.isDG?"Data Generator":"Simulation"," is running. Model name ").concat(t.model,". Started time: ").concat(new Date(t.startedTime))),this.setState({statusMessage:n})}},{key:"componentDidMount",value:function(){var e=this;this.props.requestDeployStatus(this.state.isDG),setInterval((function(){e.props.requestDeployStatus(e.state.isDG)}),3e3)}},{key:"render",value:function(){var e=this.state,t=e.isLogPage,n=e.statusMessage,a=this.props,r=a.requesting,o=a.notify,c=a.resetNotification;return u.a.createElement(ft.a,null,!t&&u.a.createElement(Ia,null),o&&Da.a[o.type]({message:o.type.toUpperCase(),description:"object"===typeof o.message?JSON.stringify(o.message):o.message,onClose:function(){return c()}}),u.a.createElement(ft.a,{style:{padding:"0 24px 24px"}},u.a.createElement(Na,null,n&&u.a.createElement(zt.a,{message:n,type:"info",style:{marginBottom:"10px",marginTop:"20px"},showIcon:!0}),r?u.a.createElement(ka.a,{tip:"Loading..."}):this.props.children)),!t&&u.a.createElement(_a,null))}}]),n}(i.Component),Va=Object(h.b)((function(e){var t=e.requesting;return{notify:e.notify,requesting:t,deployStatus:e.deployStatus}}),(function(e){return{requestDeployStatus:function(t){return e(U(t))},resetNotification:function(){return e(v())}}}))(Fa),Ua=function(e){Object(Ct.a)(n,e);var t=Object(yt.a)(n);function n(e){var a;return Object(Ot.a)(this,n),(a=t.call(this,e)).state={tempModel:e.model,isDG:!1},a.onModelChange=a.onModelChange.bind(Object(Yt.a)(a)),a}return Object(vt.a)(n,[{key:"componentDidMount",value:function(){var e=oe();this.props.initData(e),this.setState({isDG:e})}},{key:"componentWillReceiveProps",value:function(e){this.setState({tempModel:e.model})}},{key:"onModelChange",value:function(e){this.setState({tempModel:e})}},{key:"render",value:function(){var e=this,t=this.state.isDG,n=this.props,a=n.model,r=n.saveModel,o=n.showModal,c=n.selectThing,l=n.deleteThing,i=n.changeStatusThing,s=n.selectSensor,d=n.deleteSensor,h=n.changeStatusSensor,m=n.selectActuator,f=n.deleteActuator,g=n.changeStatusActuator,p=n.formID,b=n.changeModelName,E=ce("view");E||(E="list");var O=null;return O="json"===E?u.a.createElement(aa,{value:a,onChange:this.onModelChange}):"graph"===E?u.a.createElement(ba,null):u.a.createElement(ja,{model:a,modelType:t?"Data Geneartor":"Simulation",actions:{showModal:o,selectThing:c,deleteThing:l,changeStatusThing:i,selectSensor:s,deleteSensor:d,changeStatusSensor:h,selectActuator:m,deleteActuator:f,changeStatusActuator:g,changeModelName:b}}),u.a.createElement(Va,null,O,u.a.createElement(Kt.a,{type:"primary",onClick:function(){return r(t,e.state.tempModel)},style:{marginTop:"10px"}},"Save"),"THING-FORM"===p&&u.a.createElement(Dn,null),!t&&"ACTUATOR-FORM"===p&&u.a.createElement(Jn,null),("SENSOR-FORM"===p||"ACTUATOR-FORM"===p&&t)&&u.a.createElement(Wn,null))}}]),n}(i.Component),Pa=Object(h.b)((function(e){return{model:e.model,formID:e.editingForm.formID}}),(function(e){return{initData:function(t){e(C(t))},saveModel:function(t,n){e(y(n)),e(x(t))},showModal:function(t){return e(K(t))},changeModelName:function(t){return e(S(t))},selectThing:function(t){return e(q(t))},deleteThing:function(t){return e(D(t))},changeStatusThing:function(t){return e(J(t))},selectSensor:function(t){return e(Q(t))},deleteSensor:function(t,n){return e(A({sensorID:t,thingID:n}))},changeStatusSensor:function(t,n){return e(I({sensorID:t,thingID:n}))},selectActuator:function(t){return e(z(t))},deleteActuator:function(t,n){return e(R({actuatorID:t,thingID:n}))},changeStatusActuator:function(t,n){return e(w({actuatorID:t,thingID:n}))}}}))(Ua),La=n(594),Ga=function(e){Object(Ct.a)(n,e);var t=Object(yt.a)(n);function n(e){var a;return Object(Ot.a)(this,n),(a=t.call(this,e)).state={logFiles:e.logFiles},a}return Object(vt.a)(n,[{key:"componentDidMount",value:function(){this.props.initData(oe())}},{key:"componentWillReceiveProps",value:function(e){this.setState({logFiles:e.logFiles})}},{key:"render",value:function(){var e=this.props.deleteLogFile,t=this.state.logFiles,n=oe();return u.a.createElement(Va,null,u.a.createElement(va.a,{className:"site-page-header",title:"Log files"}),u.a.createElement(mn.a,{bordered:!0,dataSource:t,renderItem:function(t){return u.a.createElement(mn.a.Item,{actions:[u.a.createElement(Kt.a,{key:"list-loadmore-edit",onClick:function(){return e(n,t)},type:"danger"},"Delete")]},u.a.createElement(Ea.a,{avatar:!0,title:!1,loading:t.loading},u.a.createElement(mn.a.Item.Meta,{avatar:u.a.createElement(ua.a,null,u.a.createElement(La.a,null)),title:u.a.createElement("a",{href:"".concat(n?"/data-generator":"","/logs/").concat(t)},t),description:"Created at: ".concat(re(t))})))}}))}}]),n}(i.Component),Ba=Object(h.b)((function(e){return{logFiles:e.logs.logFiles}}),(function(e){return{deleteLogFile:function(t,n){e(W({isDG:t,logFile:n}))},initData:function(t){e(G(t))}}}))(Ga),Ha=jt.a.Text,Wa=function(e){var t=e.type,n=e.time,a=e.device,r=e.message;return u.a.createElement(Dt.a,null,u.a.createElement(kt.a,{span:4},u.a.createElement(Ha,{type:t},n)),u.a.createElement(kt.a,{span:5},u.a.createElement(Ha,{type:t},a)),u.a.createElement(kt.a,{span:15},u.a.createElement(Ha,{type:t},r)))},Ya=function(e){Object(Ct.a)(n,e);var t=Object(yt.a)(n);function n(e){var a;return Object(Ot.a)(this,n),(a=t.call(this,e)).state={logFile:null,isDG:!1},a}return Object(vt.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=function(e){var t=e.split("/");return t[t.length-1]}(window.location.pathname),n=oe();this.setState({logFile:decodeURIComponent(t)}),this.props.requestLogs(n,t),setInterval((function(){e.props.requestLogs(n,t)}),2e4)}},{key:"render",value:function(){var e=this.state.logFile,t=this.props.logs;return u.a.createElement(Va,null,u.a.createElement(va.a,{className:"site-page-header",title:e}),u.a.createElement(Wa,{key:-1,type:"warning",time:"Time",device:"Device",message:"Message"}),t?t.split("\n").map((function(e,t){var n=e.split(" ");if(n.length<4)return console.warn("Log is not going to show: ",e),null;var a="info:"===n[2]?"secondary":"danger",r=new Date(n[0]),o="".concat(r.getHours(),":").concat(r.getMinutes(),":").concat(r.getSeconds()," ").concat(r.getDay(),"/").concat(r.getMonth(),"/").concat(r.getFullYear()),c=n[3].replace("[","").replace("]",""),l=e.split(n[3])[1];return u.a.createElement(Wa,{key:t,type:a,time:o,device:c,message:l})})):u.a.createElement("p",null,"Empty"))}}]),n}(i.Component),Ka=Object(h.b)((function(e){var t=e.logs;return{logs:t.logs,logFile:t.logFile}}),(function(e){return{requestLogs:function(t,n){return e(L({isDG:t,logFile:n}))}}}))(Ya);var qa=function(){return u.a.createElement(gt.a,null,u.a.createElement(Et.a,null,u.a.createElement(ft.a,{className:"layout",style:{height:"100%"}},u.a.createElement(Lt,null),u.a.createElement(pt.c,null,u.a.createElement(pt.a,{path:"/data-generator/logs/:logFile"},u.a.createElement(Ka,null)),u.a.createElement(pt.a,{path:"/data-generator/logs"},u.a.createElement(Ba,null)),u.a.createElement(pt.a,{path:"/data-generator"},u.a.createElement(Pa,null)),u.a.createElement(pt.a,{path:"/logs/:logFile"},u.a.createElement(Ka,null)),u.a.createElement(pt.a,{path:"/logs"},u.a.createElement(Ba,null)),u.a.createElement(pt.a,{path:"/"},u.a.createElement(Pa,null))),u.a.createElement(Wt,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(553);var Ja=mt();d.a.render(u.a.createElement(h.a,{store:Ja},u.a.createElement(qa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[302,1,2]]]);
//# sourceMappingURL=main.874a4d8c.chunk.js.map