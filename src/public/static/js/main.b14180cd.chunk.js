(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{275:function(e,t){e.exports="0.6.3"},303:function(e,t,a){e.exports=a(556)},313:function(e,t,a){},385:function(e,t,a){},510:function(e,t,a){},511:function(e,t,a){},514:function(e,t,a){},515:function(e,t,a){},520:function(e,t,a){},530:function(e,t,a){},535:function(e,t,a){},536:function(e,t,a){},537:function(e,t,a){},538:function(e,t,a){},555:function(e,t,a){},556:function(e,t,a){"use strict";a.r(t);var n,r,o,c,l,i=a(0),u=a.n(i),s=a(7),d=a.n(s),h=a(31),m=a(67),f=a(300),g=a(12),p=a(52),b=a(10),E=a(44),O=Object(b.a)("SET_NOTIFICATION"),v=Object(b.a)("RESET_NOTIFICATION"),C=Object(b.a)("REQUEST_MODEL"),y=Object(b.a)("SET_MODEL"),S=Object(b.a)("CHANGE_MODEL_NAME"),j=Object(b.a)("ADD_THING"),D=Object(b.a)("DELETE_THING"),k=Object(b.a)("ADD_SIMULATION_SENSOR"),T=Object(b.a)("ADD_SIMULATION_ACTUATOR"),A=Object(b.a)("DELETE_SIMULATION_SENSOR"),R=Object(b.a)("DELETE_SIMULATION_ACTUATOR"),I=Object(b.a)("CHANGE_STATUS_SENSOR"),w=Object(b.a)("CHANGE_STATUS_ACTUATOR"),x=Object(b.a)("UPLOAD_MODEL"),M=Object(b.a)("UPLOAD_MODEL_OK"),_=Object(b.a)("SEND_DEPLOY_START"),N=Object(b.a)("DEPLOY_START_OK"),F=Object(b.a)("SEND_DEPLOY_STOP"),V=Object(b.a)("DEPLOY_STOP_OK"),U=Object(b.a)("REQUEST_DEPLOY_STATUS"),P=Object(b.a)("SET_DEPLOY_STATUS"),L=Object(b.a)("REQUEST_LOGS"),G=Object(b.a)("REQUEST_LOGFILES"),B=Object(b.a)("REQUEST_LOGS_OK"),H=Object(b.a)("REQUEST_LOGFILES_OK"),W=Object(b.a)("REQUEST_DELETE_LOG_FILE"),Y=Object(b.a)("RESET_MODEL"),K=Object(b.a)("SHOW_MODAL"),q=Object(b.a)("SELECT_THING"),J=Object(b.a)("CHANGE_STATUS_THING"),Q=Object(b.a)("SELECT_SENSOR"),z=Object(b.a)("SELECT_ACTUATOR"),Z=(Object(b.a)("SELECT_DATA_STORAGE"),Object(b.a)("REQUEST_STATS")),X=Object(b.a)("REQUEST_STATS_OK"),$=a(19),ee=function(e,t,a){for(var n=t.split(".");n.length>1;){var r=n.shift();if(r.indexOf("[")>0){var o=r.split("[");r=o[0];var c=o[1].replace("]","");e[r]||(e[r]=[]),0===e[r].length?c=0:(e[r].length<=c||c<0)&&(c=e[r].length),e[r][c]||e[r].push({}),e=e[r][c]}else e[r]||(e[r]={}),e=e[r]}var l=n.shift();if(l.indexOf("[")>0){var i=l.split("[");l=i[0];var u=i[1].replace("]","");null===a?e[l]&&e[l][u]&&e[l].splice(u,1):(e[l]||(e[l]=[]),0===e[l].length?u=0:(e[l].length<=u||u<0)&&(u=e[l].length),e[l][u]?e[l][u]=a:e[l].push(a))}else e[l]=a},te=function(e){return JSON.parse(JSON.stringify(e))},ae=function(e,t){for(var a=!1,n=0;n<e.length;n++){if(e[n].id===t.id){e[n]=Object($.a)({},t),a=!0;break}}return a||e.push(t),e},ne=function(e,t){for(var a=!1,n=0;n<e.length;n++){if(e[n].id===t){e.splice(n,1),a=!0;break}}return a?e:(console.log("[ERROR] Cannot find the element: ".concat(t)),null)},re=function(e){var t=e.split("_"),a=t[t.length-1].replace(".log","");return new Date(Number(a))},oe=function(){return 1===window.location.pathname.indexOf("data-generator")},ce=function(e){return new URLSearchParams(window.location.search).get(e)},le={name:"NewModel"},ie=Object(b.b)((n={},Object(g.a)(n,y,Object(E.a)((function(e,t){return t}))),Object(g.a)(n,Y,(function(e){return le})),Object(g.a)(n,S,Object(E.a)((function(e,t){e.name=t}))),Object(g.a)(n,j,Object(E.a)((function(e,t){if(e.things){var a=ae(e.things,t);e.things=Object(p.a)(a)}else e.things=[t]}))),Object(g.a)(n,D,Object(E.a)((function(e,t){var a=ne(e.things,t);a&&(e.things=Object(p.a)(a))}))),Object(g.a)(n,J,Object(E.a)((function(e,t){for(var a=0;a<e.things.length;a++)if(e.things[a].id===t)return void(e.things[a].enable=!e.things[a].enable);console.error("[ERROR] Cannot find the thing ".concat(t))}))),Object(g.a)(n,k,Object(E.a)((function(e,t){var a=t.thingID,n=t.sensor,r=!1;if(e.things)for(var o=0;o<e.things.length;o++)if(e.things[o].id===a){r=!0;var c=ae(e.things[o].sensors,n);e.things[o].sensors=Object(p.a)(c);break}if(r){if(e.sensors){var l=ne(e.sensors,n.id);l&&(e.sensors=Object(p.a)(l))}}else{e.sensors||(e.sensors=[]);var i=ae(e.sensors,n);e.sensors=Object(p.a)(i)}}))),Object(g.a)(n,T,Object(E.a)((function(e,t){var a=t.thingID,n=t.actuator,r=!1;if(e.things)for(var o=0;o<e.things.length;o++)if(e.things[o].id===a){r=!0;var c=ae(e.things[o].actuators,n);e.things[o].actuators=Object(p.a)(c);break}if(r){if(e.actuators){var l=ne(e.actuators,n.id);l&&(e.actuators=Object(p.a)(l))}}else{e.actuators||(e.actuators=[]);var i=ae(e.actuators,n);e.actuators=Object(p.a)(i)}}))),Object(g.a)(n,A,Object(E.a)((function(e,t){var a=t.sensorID,n=t.thingID;if(n){for(var r=!1,o=0;o<e.things.length;o++)if(e.things[o].id===n){r=!0;var c=ne(e.things[o].sensors,a);c&&(e.things[o].sensors=Object(p.a)(c));break}r||console.log("[ERROR] Cannot remove ".concat(a," from ").concat(n))}else{var l=ne(e.sensors,a);l&&(e.sensors=Object(p.a)(l))}}))),Object(g.a)(n,I,Object(E.a)((function(e,t){var a=t.sensorID,n=t.thingID;if(n){for(var r=0;r<e.things.length;r++)if(e.things[r].id===n){for(var o=0;o<e.things[r].sensors.length;o++)if(e.things[r].sensors[o].id===a)return void(e.things[r].sensors[o].enable=!e.things[r].sensors[o].enable);break}console.log("[ERROR] Cannot change status of sensor ".concat(a," in ").concat(n))}else{if(e.sensors)for(var c=0;c<e.sensors.length;c++)if(e.sensors[c].id===a)return void(e.sensors[c].enable=!e.sensors[c].enable);console.log("[ERROR] Cannot change status of sensor ".concat(a," in ").concat(n))}}))),Object(g.a)(n,R,Object(E.a)((function(e,t){var a=t.actuatorID,n=t.thingID;if(n){for(var r=!1,o=0;o<e.things.length;o++)if(e.things[o].id===n){r=!0;var c=ne(e.things[o].actuators,a);c&&(e.things[o].actuators=Object(p.a)(c));break}r||console.log("[ERROR] Cannot remove ".concat(a," from ").concat(n))}else{var l=ne(e.actuators,a);l&&(e.actuators=Object(p.a)(l))}}))),Object(g.a)(n,w,Object(E.a)((function(e,t){var a=t.actuatorID,n=t.thingID;if(n){for(var r=0;r<e.things.length;r++)if(e.things[r].id===n){for(var o=0;o<e.things[r].actuators.length;o++)if(e.things[r].actuators[o].id===a)return void(e.things[r].actuators[o].enable=!e.things[r].actuators[o].enable);break}console.log("[ERROR] Cannot change status of actuator ".concat(a," in ").concat(n))}else{if(e.actuators)for(var c=0;c<e.actuators.length;c++)if(e.actuators[c].id===a)return void(e.actuators[c].enable=!e.actuators[c].enable);console.log("[ERROR] Cannot change status of actuator ".concat(a," in ").concat(n))}}))),n),le),ue=Object(b.b)((r={},Object(g.a)(r,x,(function(e){return!0})),Object(g.a)(r,C,(function(e){return!0})),Object(g.a)(r,F,(function(e){return!0})),Object(g.a)(r,_,(function(e){return!0})),Object(g.a)(r,O,(function(e){return!1})),Object(g.a)(r,y,(function(e){return!1})),Object(g.a)(r,M,(function(e){return!1})),Object(g.a)(r,V,(function(e){return!1})),Object(g.a)(r,N,(function(e){return!1})),Object(g.a)(r,L,(function(e){return!0})),Object(g.a)(r,B,(function(e){return!1})),r),!1),se=Object(b.b)((o={},Object(g.a)(o,O,(function(e,t){return{type:t.type,message:t.message}})),Object(g.a)(o,v,(function(e){return null})),Object(g.a)(o,j,(function(e,t){return{type:"success",message:"Thing ".concat(t.id," has been added!")}})),Object(g.a)(o,D,(function(e,t){return{type:"success",message:"Thing ".concat(t," has been removed!")}})),Object(g.a)(o,k,(function(e,t){var a=t.sensor,n=t.thingID;return{type:"success",message:"Sensor ".concat(a.id," has been added ").concat(n?"into Thing ".concat(n):"","!")}})),Object(g.a)(o,A,(function(e,t){var a=t.sensorID,n=t.thingID;return{type:"success",message:"Sensor ".concat(a," has been removed").concat(n?"from Thing ".concat(n):"","!")}})),Object(g.a)(o,T,(function(e,t){var a=t.actuator,n=t.thingID;return{type:"success",message:"Actuator ".concat(a.id," has been added ").concat(n?"into Thing ".concat(n):"","!")}})),Object(g.a)(o,R,(function(e,t){var a=t.actuatorID,n=t.thingID;return{type:"success",message:"Actuator ".concat(a," has been removed").concat(n?"from Thing ".concat(n):"","!")}})),o),null),de=Object(b.b)((c={},Object(g.a)(c,B,(function(e,t){return Object($.a)(Object($.a)({},e),{},{logs:t})})),Object(g.a)(c,H,(function(e,t){return Object($.a)(Object($.a)({},e),{},{logFiles:t})})),Object(g.a)(c,W,Object(E.a)((function(e,t){t.isDG;var a=t.logFile,n=e.logFiles.indexOf(a);n>-1&&e.logFiles.splice(n,1)}))),c),{logs:null,logFiles:[]}),he=Object(b.b)((l={},Object(g.a)(l,K,(function(e,t){return Object($.a)(Object($.a)({},e),{},{formID:t})})),Object(g.a)(l,q,(function(e,t){return Object($.a)(Object($.a)({},e),{},{selectedThing:t})})),Object(g.a)(l,Q,(function(e,t){return Object($.a)(Object($.a)({},e),{},{selectedSensor:t})})),Object(g.a)(l,z,(function(e,t){return Object($.a)(Object($.a)({},e),{},{selectedActuator:t})})),l),{formID:null,selectedThing:null,selectedSensor:null,selectedActuator:null,dataStorage:null}),me=Object(b.b)(Object(g.a)({},P,(function(e,t){return t})),!1),fe=Object(b.b)(Object(g.a)({},X,(function(e,t){return t})),[]),ge=Object(m.c)({model:ie,stats:fe,logs:de,notify:se,requesting:ue,editingForm:he,deployStatus:me}),pe=a(6),be=a.n(pe),Ee=a(13),Oe=a(72),ve=function(){var e=Object(Oe.a)(be.a.mark((function e(t){var a,n,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("","/api/").concat(t,"/model"),e.next=3,fetch(a);case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw r.error;case 9:return e.abrupt("return",r.model);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(Oe.a)(be.a.mark((function e(t,a){var n,r,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("","/api/").concat(t,"/model"),e.next=3,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:a})});case 3:return r=e.sent,e.next=6,r.json();case 6:if(!(o=e.sent).error){e.next=9;break}throw o.error;case 9:return e.abrupt("return",o.model);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ye=function(){var e=Object(Oe.a)(be.a.mark((function e(t,a){var n,r,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("","/api/").concat(t,"/logs/").concat(a),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:if(!(o=e.sent).error){e.next=9;break}throw o.error;case 9:return e.abrupt("return",o.content);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Se=function(){var e=Object(Oe.a)(be.a.mark((function e(t){var a,n,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("","/api/").concat(t,"/stats"),e.next=3,fetch(a);case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw r.error;case 9:return e.abrupt("return",r.stats);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(Oe.a)(be.a.mark((function e(t,a){var n,r,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("","/api/").concat(t,"/logs/").concat(a),e.next=3,fetch(n,{method:"POST"});case 3:return r=e.sent,e.next=6,r.json();case 6:if(!(o=e.sent).error){e.next=9;break}throw o.error;case 9:return e.abrupt("return",o.result);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),De=function(){var e=Object(Oe.a)(be.a.mark((function e(t){var a,n,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("","/api/").concat(t,"/logs"),e.next=3,fetch(a);case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw r.error;case 9:return e.abrupt("return",r.files);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(Oe.a)(be.a.mark((function e(t,a){var n,r,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("","/api/").concat(t,"/deploy"),e.next=3,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:a})});case 3:return r=e.sent,e.next=6,r.json();case 6:if(!(o=e.sent).error){e.next=9;break}throw o.error;case 9:return e.abrupt("return",o.deployStatus);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Te=function(){var e=Object(Oe.a)(be.a.mark((function e(t){var a,n,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("","/api/").concat(t,"/stop"),e.next=3,fetch(a);case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw r.error;case 9:return e.abrupt("return",r.deployStatus);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(Oe.a)(be.a.mark((function e(t){var a,n,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("","/api/").concat(t,"/status"),e.next=3,fetch(a);case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw r.error;case 9:return e.abrupt("return",r.deployStatus);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=be.a.mark(we),Ie=be.a.mark(xe);function we(e){var t,a;return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload?"data-generator":"simulation",n.next=4,Object(Ee.b)((function(){return ve(t)}));case 4:return a=n.sent,n.next=7,Object(Ee.c)(y(a));case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,Object(Ee.c)(O({type:"error",message:n.t0}));case 13:case"end":return n.stop()}}),Re,null,[[0,9]])}function xe(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.e)("REQUEST_MODEL",we);case 2:case"end":return e.stop()}}),Ie)}var Me=xe,_e=be.a.mark(Ve),Ne=be.a.mark(Ue),Fe=function(e){return e.model};function Ve(e){var t,a,n;return be.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload?"data-generator":"simulation",r.next=4,Object(Ee.d)(Fe);case 4:if(!(a=r.sent)){r.next=15;break}return r.next=8,Object(Ee.b)((function(){return Ce(t,a)}));case 8:return n=r.sent,r.next=11,Object(Ee.c)(M(n.data));case 11:return r.next=13,Object(Ee.c)(O({type:"success",message:"Model ".concat(a.name," has been updated!")}));case 13:r.next=16;break;case 15:throw Error("Undefined model");case 16:r.next=22;break;case 18:return r.prev=18,r.t0=r.catch(0),r.next=22,Object(Ee.c)(O({type:"error",message:r.t0}));case 22:case"end":return r.stop()}}),_e,null,[[0,18]])}function Ue(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.e)("UPLOAD_MODEL",Ve);case 2:case"end":return e.stop()}}),Ne)}var Pe=Ue,Le=be.a.mark(Ye),Ge=be.a.mark(Ke),Be=be.a.mark(qe),He=be.a.mark(Je),We=function(e){return e.model};function Ye(e){var t,a,n;return be.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload?"data-generator":"simulation",r.next=4,Object(Ee.d)(We);case 4:return a=r.sent,r.next=7,Object(Ee.b)((function(){return ke(t,a)}));case 7:return n=r.sent,r.next=10,Object(Ee.c)(N());case 10:return r.next=12,Object(Ee.c)(P(n));case 12:return r.next=14,Object(Ee.c)(O({type:"success",message:"".concat(t.toUpperCase()," has been started!")}));case 14:r.next=20;break;case 16:return r.prev=16,r.t0=r.catch(0),r.next=20,Object(Ee.c)(O({type:"error",message:r.t0}));case 20:case"end":return r.stop()}}),Le,null,[[0,16]])}function Ke(e){var t;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload?"data-generator":"simulation",a.next=4,Object(Ee.b)((function(){return Te(t)}));case 4:return a.next=6,Object(Ee.c)(V());case 6:return a.next=8,Object(Ee.c)(P(null));case 8:return a.next=10,Object(Ee.c)(O({type:"success",message:"".concat(t.toUpperCase()," has been stopped!")}));case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(0),a.next=16,Object(Ee.c)(O({type:"error",message:a.t0}));case 16:case"end":return a.stop()}}),Ge,null,[[0,12]])}function qe(e){var t,a;return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload?"data-generator":"simulation",n.next=4,Object(Ee.b)((function(){return Ae(t)}));case 4:return a=n.sent,n.next=7,Object(Ee.c)(P(a));case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,Object(Ee.c)(O({type:"error",message:n.t0}));case 13:case"end":return n.stop()}}),Be,null,[[0,9]])}function Je(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.e)("SEND_DEPLOY_START",Ye);case 2:return e.next=4,Object(Ee.e)("SEND_DEPLOY_STOP",Ke);case 4:return e.next=6,Object(Ee.e)("REQUEST_DEPLOY_STATUS",qe);case 6:case"end":return e.stop()}}),He)}var Qe=Je,ze=be.a.mark(et),Ze=be.a.mark(tt),Xe=be.a.mark(at),$e=be.a.mark(nt);function et(e){var t,a,n;return be.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload,a=t?"data-generator":"simulation",r.next=5,Object(Ee.b)((function(){return De(a)}));case 5:return n=r.sent,r.next=8,Object(Ee.c)(H(n));case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r.catch(0),r.next=14,Object(Ee.c)(O({type:"error",message:r.t0}));case 14:case"end":return r.stop()}}),ze,null,[[0,10]])}function tt(e){var t,a,n,r,o;return be.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,a=t.isDG,n=t.logFile,r=a?"data-generator":"simulation",c.next=5,Object(Ee.b)((function(){return ye(r,n)}));case 5:return o=c.sent,c.next=8,Object(Ee.c)(B(o));case 8:c.next=14;break;case 10:return c.prev=10,c.t0=c.catch(0),c.next=14,Object(Ee.c)(O({type:"error",message:c.t0}));case 14:case"end":return c.stop()}}),Ze,null,[[0,10]])}function at(e){var t,a,n,r;return be.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,t=e.payload,a=t.isDG,n=t.logFile,r=a?"data-generator":"simulation",o.next=5,Object(Ee.b)((function(){return je(r,n)}));case 5:o.next=11;break;case 7:return o.prev=7,o.t0=o.catch(0),o.next=11,Object(Ee.c)(O({type:"error",message:o.t0}));case 11:case"end":return o.stop()}}),Xe,null,[[0,7]])}function nt(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.e)("REQUEST_LOGS",tt);case 2:return e.next=4,Object(Ee.e)("REQUEST_LOGFILES",et);case 4:return e.next=6,Object(Ee.e)("REQUEST_DELETE_LOG_FILE",at);case 6:case"end":return e.stop()}}),$e)}var rt=nt,ot=be.a.mark(lt),ct=be.a.mark(it);function lt(e){var t,a,n;return be.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload.isDG,a=t?"data-generator":"simulation",r.next=5,Object(Ee.b)((function(){return Se(a)}));case 5:return n=r.sent,r.next=8,Object(Ee.c)(X(n));case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r.catch(0),r.next=14,Object(Ee.c)(O({type:"error",message:r.t0}));case 14:case"end":return r.stop()}}),ot,null,[[0,10]])}function it(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.e)("REQUEST_STATS",lt);case 2:case"end":return e.stop()}}),ct)}var ut=it,st=be.a.mark(dt);function dt(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.a)([Me(),Pe(),Qe(),rt(),ut()]);case 2:case"end":return e.stop()}}),st)}var ht=dt,mt=function(){var e=Object(f.a)(),t=Object(m.e)(ge,Object(m.d)(Object(m.a)(e),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));return e.run(ht),t},ft=(a(312),a(560)),gt=a(295),pt=a(91),bt=a(210),Et=a.n(bt),Ot=a(27),vt=a(28),Ct=a(30),yt=a(29),St=a(217),jt=a(568),Dt=a(125),kt=a(62),Tt=a(274),At=a(581),Rt=a(582),It=a(583),wt=a(584),xt=a(585),Mt=a(586),_t=a(587),Nt=a(588),Ft=(a(313),St.a.SubMenu),Vt=ft.a.Header,Ut=jt.a.Text,Pt=function(e){Object(Ct.a)(a,e);var t=Object(yt.a)(a);function a(){return Object(Ot.a)(this,a),t.apply(this,arguments)}return Object(vt.a)(a,[{key:"onUpload",value:function(e){var t=this,a=new FileReader;a.onloadend=function(){try{var e=JSON.parse(a.result);t.props.setNewModel(e)}catch(n){t.props.setNotification({type:"error",message:n})}},a.readAsText(e[0])}},{key:"exportModel",value:function(e){if(e){var t=JSON.stringify(e),a=new Blob([t],{type:"text/json"}),n=URL.createObjectURL(a),r=document.createElement("a");r.download="".concat(e.name.replace(/ /g,""),".json"),r.href=n,r.click()}}},{key:"render",value:function(){var e=this,t=this.props,a=t.resetEditor,n=t.startDeploy,r=t.stopDeploy,o=t.deployStatus,c=t.model,l=oe(),i=l?"/img/logo-data-generator.png":"/img/logo-simulation.png";return u.a.createElement(Vt,null,u.a.createElement(Dt.a,null,u.a.createElement(kt.a,{span:4},u.a.createElement("a",{href:"/"},u.a.createElement("img",{src:i,className:"logo",alt:"Logo",style:{maxWidth:"250px",objectFit:"contain"}}))),u.a.createElement(kt.a,{span:14,push:6},u.a.createElement(St.a,{theme:"dark",mode:"horizontal",style:{lineHeight:"64px"}},u.a.createElement(Ft,{title:u.a.createElement("a",{className:"submenu-title-wrapper",href:l?"/data-generator":"/"},u.a.createElement(At.a,null),"Model")},u.a.createElement(St.a.Item,{key:"model:1",onClick:function(){return e.inputFileDOM.click()}},u.a.createElement(Rt.a,null)," Import Model"),u.a.createElement(St.a.Item,{key:"model:2",onClick:function(){return e.exportModel(c)}},u.a.createElement(It.a,null),"Export Model"),u.a.createElement(St.a.Item,{key:"model:3",onClick:a},u.a.createElement(wt.a,null),"Reset Editor")),u.a.createElement(Ft,{title:u.a.createElement("span",{className:"submenu-title-wrapper"},o?u.a.createElement(Tt.a,{indicator:u.a.createElement(xt.a,{spin:!0,style:{fontSize:"24"}})}):u.a.createElement(xt.a,null),l?"Generate ":"Simulate ")},u.a.createElement(St.a.Item,{key:"deploy:1",onClick:function(){return n(l)}},u.a.createElement(Mt.a,null),l?"Generate":"Simulate"),u.a.createElement(St.a.Item,{key:"deploy:2",onClick:function(){return r(l)}},u.a.createElement(_t.a,null),"Terminate")),u.a.createElement(St.a.Item,{key:"3"},u.a.createElement("a",{href:l?"/data-generator/logs":"/logs",rel:"noopener noreferrer",target:"_blank"},u.a.createElement(Nt.a,null),"Logs")),u.a.createElement(St.a.Item,{key:"4"},u.a.createElement("a",{href:l?"/":"/data-generator",rel:"noopener noreferrer",target:"_blank"},u.a.createElement(It.a,null),u.a.createElement(Ut,{style:{color:"#ffff00fc"}},l?"Simulation":"Data Generator")))))),u.a.createElement("input",{type:"file",onChange:function(t){return e.onUpload(t.target.files)},ref:function(t){e.inputFileDOM=t},style:{display:"none"},accept:".json",multiple:!1}))}}]),a}(i.Component),Lt=Object(h.b)((function(e){return{requesting:e.requesting,model:e.model,deployStatus:e.deployStatus}}),(function(e){return{setNotification:function(t){var a=t.type,n=t.message;return e(O({type:a,message:n}))},setNewModel:function(t){e(y(t))},resetEditor:function(){e(Y())},startDeploy:function(t){return e(_(t))},stopDeploy:function(t){return e(F(t))},viewLogs:function(){e(G())}}}))(Pt),Gt=a(275),Bt=a.n(Gt),Ht=ft.a.Footer,Wt=function(){return u.a.createElement(Ht,{style:{textAlign:"center"}},"ENACT \xa9",(new Date).getFullYear()," Created by"," ",u.a.createElement("a",{href:"https://www.montimage.com"},"Montimage"),". Version ",Bt.a)},Yt=a(69),Kt=a(43),qt=a(567),Jt=(a(385),function(e){var t=e.visible,a=e.title,n=e.footer,r=e.onCancel,o=e.children;return u.a.createElement(qt.a,{visible:t,title:a,footer:n,onCancel:r},o)}),Qt=a(570),zt=a(578),Zt=a(577),Xt=function(e){var t=e.label,a=e.defaultValue,n=e.onChange,r=e.placeholder;return u.a.createElement(Qt.a.Item,{label:t},a?u.a.createElement(Zt.a,{defaultValue:a,onChange:function(e){return n(e.target.value)}}):u.a.createElement(Zt.a,{onChange:function(e){return n(e.target.value)},placeholder:r}))},$t=a(142),ea=function(e){var t=e.label,a=e.defaultValue,n=e.onChange,r=e.options;return u.a.createElement(Qt.a.Item,{label:t},u.a.createElement($t.a,{defaultValue:a||(r?r[0]:null),onChange:function(e){return n(e)}},r.map((function(e){return u.a.createElement($t.a.Option,{value:e,key:e},e)}))))},ta=a(574),aa=function(e){var t=e.label,a=e.defaultValue,n=e.min,r=e.max,o=e.onChange,c=e.placeholder;return u.a.createElement(Qt.a.Item,{label:t},a?u.a.createElement(ta.a,{min:n,max:r,defaultValue:a,onChange:function(e){return o(e)},placeholder:c}):u.a.createElement(ta.a,{min:n,max:r,onChange:function(e){return o(e)},placeholder:c}))},na=a(572),ra=a(124),oa=a.n(ra),ca=na.a.RangePicker,la=function(e){var t=e.label,a=e.onChange,n=e.defaultValue,r=oa()(),o=oa()();return n&&2===n.length&&(r=oa()(n[0]),o=oa()(n[1])),u.a.createElement(Qt.a.Item,{label:t},u.a.createElement(ca,{defaultValue:[r,o],showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",onChange:function(e,t){return a([new Date(t[0]).getTime(),new Date(t[1]).getTime()])}}))},ia=a(561),ua=function(e){var t=e.label,a=e.checked,n=e.onChange,r=e.checkedChildren,o=e.unCheckedChildren;return u.a.createElement(Qt.a.Item,{label:t},u.a.createElement(ia.a,{onChange:function(e){return n(e)},checkedChildren:r,unCheckedChildren:o,checked:a}))},sa=a(575),da=function(e){var t=e.label,a=e.defaultValue,n=e.onChange,r=e.options;return u.a.createElement(Qt.a.Item,{label:t},u.a.createElement(sa.a.Group,{options:r,defaultValue:a,onChange:n}))},ha=a(566),ma=a(565),fa=function(e){var t=e.label,a=e.items,n=e.onChange;return u.a.createElement(Qt.a.Item,{label:t},u.a.createElement(ha.a,{grid:{gutter:16,column:a.length},dataSource:a,renderItem:function(e){return u.a.createElement(ha.a.Item,null,u.a.createElement(ma.a,{size:"small",bordered:!1,title:e.title},u.a.createElement(ta.a,{onChange:function(t){return n(e.dataPath,t)},defaultValue:e.defaultValue?e.defaultValue:0,placeholder:e.title})))}}))},ga=jt.a.Paragraph,pa=function(e){var t=e.label,a=e.defaultValue,n=e.onChange;return u.a.createElement(Qt.a.Item,{label:t},u.a.createElement(ga,{editable:{onChange:function(e){n(e)}}},a))},ba=function(e){var t=e.defaultValue,a=e.dataPath,n=e.onDataChange;return u.a.createElement(u.a.Fragment,null,u.a.createElement(Xt,{label:"User",defaultValue:t.user,onChange:function(e){return n("".concat(a?"".concat(a,"."):"","user"),e)},placeholder:"Username"}),u.a.createElement(Xt,{label:"Password",defaultValue:t.password,onChange:function(e){return n("".concat(a?"".concat(a,"."):"","password"),e)},placeholder:"Password"}),u.a.createElement(Xt,{label:"Database",defaultValue:t.dbname,onChange:function(e){return n("".concat(a?"".concat(a,"."):"","dbname"),e)},placeholder:"Database name"}))},Ea=a(569),Oa=Ea.a.Panel,va=function(e){var t=e.title,a=e.children,n=e.bordered,r=void 0===n||n,o=e.active;return u.a.createElement(Ea.a,{accordion:!0,style:{margin:"10px"},defaultActiveKey:o?["1"]:null,bordered:r},u.a.createElement(Oa,{header:t,key:"1"},a))},Ca=function(e){var t=e.defaultValue,a=e.dataPath,n=e.onDataChange,r=e.type;return u.a.createElement(va,{title:"Connection Configuration",bordered:!1,active:!0},u.a.createElement(Xt,{label:"Host",defaultValue:t.host,onChange:function(e){return n("".concat(a?"".concat(a,"."):"","host"),e)}}),u.a.createElement(aa,{label:"Port",min:1023,max:65535,defaultValue:t.port,onChange:function(e){return n("".concat(a?"".concat(a,"."):"","port"),e)}}),"MONGODB"===r&&u.a.createElement(u.a.Fragment,null,u.a.createElement(ba,{defaultValue:t,dataPath:a,onDataChange:n})),u.a.createElement(Xt,{label:"Options",defaultValue:JSON.stringify(t.options),onChange:function(e){return n("".concat(a?"".concat(a,"."):"","options"),e)},placeholder:"Connection options in JSON format"}))},ya=function(e){Object(Ct.a)(a,e);var t=Object(yt.a)(a);function a(e){var n;Object(Ot.a)(this,a),n=t.call(this,e);var r=oe(),o={id:"dev-id-".concat(Date.now()),name:"dev-name-".concat(Date.now()),protocol:r?"DATABASE":"MQTT",behaviours:[],timeToDown:0,connConfig:{host:"localhost",port:r?27017:1883,options:null},sensors:[],actuators:[],enable:!0};return n.state={data:e.selectedThing?te(e.selectedThing):o,error:null,isDG:oe()},n}return Object(vt.a)(a,[{key:"handleOk",value:function(){var e=this.props,t=e.addThing,a=e.showModal,n=e.selectThing,r=this.state.data,o=Object($.a)({},r),c=null;if(o.connConfig.options)try{var l=JSON.parse(o.connConfig.options);ee(o,"connConfig.options",l)}catch(i){c="Invalid option! The communication options must be in JSON format"}c?this.setState({error:c}):(t(r),a(null),n(null))}},{key:"handleCancel",value:function(){this.props.showModal(null),this.props.selectThing(null)}},{key:"handleDuplicate",value:function(){var e=this.props,t=e.addThing,a=e.showModal,n=e.selectThing,r="dev-id-".concat(Date.now()),o=Object($.a)({},this.state.data);ee(o,"id",r),ee(o,"name","New Device"),t(o),n(o),setTimeout((function(){a("THING-FORM")}),500),a(null)}},{key:"onDataChange",value:function(e,t){this.setState((function(a){var n=Object($.a)({},a.data);return ee(n,e,t),{data:n,error:null}}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.error,r=this.props.formID,o=null;return o=this.props.selectedThing?[u.a.createElement(Kt.a,{key:"duplicate",onClick:function(){return e.handleDuplicate()}},"Duplicate"),u.a.createElement(Kt.a,{key:"cancel",onClick:function(){return e.handleCancel()}},"Cancel"),u.a.createElement(Kt.a,{key:"ok",type:"primary",onClick:function(){return e.handleOk()}},"OK")]:[u.a.createElement(Kt.a,{key:"cancel",onClick:function(){return e.handleCancel()}},"Cancel"),u.a.createElement(Kt.a,{key:"ok",type:"primary",onClick:function(){return e.handleOk()}},"OK")],u.a.createElement(Jt,{title:"Device",visible:"THING-FORM"===r,onCancel:function(){return e.handleCancel()},footer:o},u.a.createElement(Qt.a,{labelCol:{span:4},wrapperCol:{span:14}},u.a.createElement(Xt,{label:"Id",defaultValue:a.id,onChange:function(t){return e.onDataChange("id",t)}}),u.a.createElement(Xt,{label:"Name",defaultValue:a.name,onChange:function(t){return e.onDataChange("name",t)}}),u.a.createElement(aa,{label:"Number of Instance",min:1,max:1e6,placeholder:"Number of instances",defaultValue:a.scale?a.scale:1,onChange:function(t){return e.onDataChange("scale",t)}}),u.a.createElement(da,{label:"Gateway Behaviours",defaultValue:a.behaviours?a.behaviours:[],onChange:function(t){return e.onDataChange("behaviours",t)},options:["GATEWAY_DOWN"]}),a.behaviours&&a.behaviours.indexOf("GATEWAY_DOWN")>-1&&u.a.createElement(aa,{label:"Time Before Down",min:1,max:65535,defaultValue:a.timeToDown?a.timeToDown:10,onChange:function(t){return e.onDataChange("timeToDown",t)}}),u.a.createElement("span",null,"Communication detail"),u.a.createElement("p",null),this.state.isDG?u.a.createElement(Ca,{defaultValue:a.connConfig,dataPath:"connConfig",onDataChange:function(t,a){return e.onDataChange(t,a)},type:"MONGODB"}):u.a.createElement(u.a.Fragment,null,u.a.createElement(ea,{label:"Protocol",defaultValue:a.protocol,onChange:function(t){return e.onDataChange("protocol",t)},options:["MQTT","STOMP"]}),u.a.createElement(Ca,{defaultValue:a.connConfig,dataPath:"connConfig",onDataChange:function(t,a){return e.onDataChange(t,a)},type:a.protocol})),u.a.createElement(ua,{label:"Enable",onChange:function(t){return e.onDataChange("enable",t)},checked:!!a.enable,checkedChildren:"On",unCheckedChildren:"Off"})),n&&u.a.createElement(zt.a,{message:n,type:"error"}))}}]),a}(i.Component),Sa=Object(h.b)((function(e){var t=e.editingForm,a=e.model;return{formID:t.formID,selectedThing:t.selectedThing,things:a.things}}),(function(e){return{showModal:function(t){return e(K(t))},deleteThing:function(t){return e(D(t))},addThing:function(t){return e(j(t))},selectThing:function(t){return e(q(t))}}}))(ya),ja=(a(510),Sa),Da=function(e){var t=e.dataPath,a=e.dataSource,n=e.onDataChange;return u.a.createElement(u.a.Fragment,null,u.a.createElement(Ca,{defaultValue:a.connConfig,dataPath:"".concat(t,".connConfig"),onDataChange:function(e,t){return n(e,t)},type:"MONGODB"}),u.a.createElement(Xt,{label:"sensor-id",defaultValue:a.devId,onChange:function(e){return n("".concat(t,".devId"),e)}}),u.a.createElement(la,{label:"Time Range",defaultValue:[a.startTime?a.startTime:Date.now(),a.endTime?a.endTime:Date.now()],onChange:function(e){n("".concat(t,".startTime"),e[0]),n("".concat(t,".endTime"),e[1])}}))},ka=(a(511),["AB_FIX_VALUE","AB_INVALID_VALUE","NORMAL_BEHAVIOUR"]),Ta=function(e){var t=e.dataPath,a=e.defaultValue,n=e.onChange,r=e.behaviours,o=e.children;return u.a.createElement(va,{title:a.key},u.a.createElement(Xt,{label:"Resource Id",defaultValue:a.resourceId,onChange:function(e){return n("".concat(t,".resourceId"),e)},placeholder:"Optional"}),u.a.createElement(Xt,{label:"key",defaultValue:a.key,onChange:function(e){return n("".concat(t,".key"),e)},placeholder:"Require"}),u.a.createElement(Xt,{label:"unit",defaultValue:a.unit,onChange:function(e){return n("".concat(t,".unit"),e)},placeholder:"Unit of the measurement"}),u.a.createElement(da,{label:"Behaviours",defaultValue:a.behaviours,onChange:function(e){return n("".concat(t,".behaviours"),e)},options:r?ka.concat(r):ka}),o,u.a.createElement(Kt.a,{type:"danger",onClick:function(){return n(t,null)}},"Remove"))},Aa=function(e){var t=e.dataPath,a=e.defaultValue,n=e.onChange;return u.a.createElement(u.a.Fragment,null,u.a.createElement(Ta,{dataPath:t,defaultValue:a,onChange:function(e,t){return n(e,t)}},u.a.createElement(aa,{label:"Init Value",min:1,max:65535,defaultValue:a.initValue,onChange:function(e){return n("".concat(t,".initValue"),e)}}),u.a.createElement(fa,{label:"Energy",items:[{title:"Consum",dataPath:"".concat(t,".consumInOnePeriod"),defaultValue:a.consumInOnePeriod},{title:"Low",dataPath:"".concat(t,".low"),defaultValue:a.low},{title:"Slow Down Rate",dataPath:"".concat(t,".slowDownRate"),defaultValue:a.slowDownRate}],onChange:function(e,t){return n(e,t)}})))},Ra=function(e){var t=e.dataPath,a=e.defaultValue,n=e.onChange;return u.a.createElement(u.a.Fragment,null,u.a.createElement(Ta,{dataPath:t,defaultValue:a,onChange:function(e,t){return n(e,t)}},u.a.createElement(ua,{label:"Init Value",onChange:function(e){return n("".concat(t,".initValue"),e)},checked:!!a.initValue,checkedChildren:"True",unCheckedChildren:"False"})))},Ia=function(e){var t=e.dataPath,a=e.defaultValue,n=e.onChange;return u.a.createElement(u.a.Fragment,null,u.a.createElement(Ta,{dataPath:t,defaultValue:a,onChange:function(e,t){return n(e,t)}},u.a.createElement(ea,{label:"Init Value",defaultValue:a.initValue,onChange:function(e){return n("".concat(t,".initValue"),e)},options:a.values}),u.a.createElement(Xt,{label:"Value",defaultValue:JSON.stringify(a.values),onChange:function(e){return n("".concat(t,".values"),JSON.parse(e))},placeholder:"List of value should be separated by comma (,)"})))},wa={min:0,max:100,regularMin:0,regularMax:100,step:2},xa=function(e){var t=e.defaultValue,a=e.dataPath,n=e.onChange;return u.a.createElement(va,{title:"Value Constraints"},u.a.createElement(fa,{label:"Range",items:[{title:"Min",dataPath:"".concat(a,".min"),defaultValue:t.min},{title:"Max",dataPath:"".concat(a,".max"),defaultValue:t.max}],onChange:function(e,t){return n(e,t)}}),u.a.createElement(fa,{label:"Regular Range",items:[{title:"Regular Min",dataPath:"".concat(a,".regularMin"),defaultValue:t.regularMin},{title:"Regular Max",dataPath:"".concat(a,".regularMax"),defaultValue:t.regularMax},{title:"Step",dataPath:"".concat(a,".step"),defaultValue:t.step}],onChange:function(e,t){return n(e,t)}}))},Ma=function(e){var t=e.dataPath,a=e.defaultValue,n=e.onChange;return u.a.createElement(u.a.Fragment,null,u.a.createElement(Ta,{dataPath:t,defaultValue:a,onChange:function(e,t){return n(e,t)},behaviours:["AB_VALUE_OUT_OF_RANGE","AB_VALUE_OUT_OF_REGULAR_RANGE","AB_VALUE_CHANGE_OUT_OF_REGULAR_STEP"]},u.a.createElement(aa,{label:"Init Value",defaultValue:a.initValue,onChange:function(e){return n("".concat(t,".initValue"),e)}}),u.a.createElement(ua,{label:"Value Constraints",onChange:function(e){return n("".concat(t,".withValueConstraints"),e)},checked:!!a.withValueConstraints,checkedChildren:"Enable",unCheckedChildren:"Disable"}),a.withValueConstraints?a.valueConstraints?u.a.createElement(xa,{defaultValue:a.valueConstraints,dataPath:"".concat(t,".valueConstraints"),onChange:function(e,t){return n(e,t)}}):u.a.createElement(xa,{defaultValue:wa,dataPath:"".concat(t,".valueConstraints"),onChange:function(e,t){return n(e,t)}}):u.a.createElement(u.a.Fragment,null)))},_a=function(e){var t=e.dataPath,a=e.sources,n=e.onChange;return u.a.createElement(i.Fragment,null,a.map((function(e,a){if(e)switch(e.type){case"DATA_SOURCE_BOOLEAN":return u.a.createElement(Ra,{key:a,dataPath:"".concat(t,"[").concat(a,"]"),defaultValue:e,onChange:function(e,t){return n(e,t)}});case"DATA_SOURCE_ENUM":return u.a.createElement(Ia,{key:a,dataPath:"".concat(t,"[").concat(a,"]"),defaultValue:e,onChange:function(e,t){return n(e,t)}});case"DATA_SOURCE_INTEGER":case"DATA_SOURCE_FLOAT":return u.a.createElement(Ma,{key:a,dataPath:"".concat(t,"[").concat(a,"]"),defaultValue:e,onChange:function(e,t){return n(e,t)}})}})))},Na=a(562),Fa=a(579),Va=a(589),Ua=function(e){var t=e.dataPath,a=e.dataSource,n=e.onDataChange,r=e.showEnergyOption,o=void 0===r||r;return u.a.createElement(u.a.Fragment,null,u.a.createElement(aa,{label:"Number of Instance",min:1,max:1e6,placeholder:"Number of instances",defaultValue:a.scale?a.scale:1,onChange:function(e){return n("".concat(t,".scale"),e)}}),u.a.createElement(aa,{label:"Time Period",min:1,max:65535,defaultValue:a.timePeriod,onChange:function(e){return n("".concat(t,".timePeriod"),e)}}),u.a.createElement(da,{label:"Sensor Behaviours",defaultValue:a.sensorBehaviours,onChange:function(e){return n("".concat(t,".sensorBehaviours"),e)},options:["AB_LOW_ENERGY","AB_OUT_OF_ENERGY","AB_NODE_FAILED","AB_DOS_ATTACK","AB_SLOW_DOS_ATTACK","NORMAL_BEHAVIOUR"]}),a.sensorBehaviours.indexOf("AB_DOS_ATTACK")>-1&&u.a.createElement(aa,{label:"DOS attack speedup rate",min:1,max:100,defaultValue:a.dosAttackSpeedUpRate,onChange:function(e){return n("".concat(t,".dosAttackSpeedUpRate"),e)}}),a.sensorBehaviours.indexOf("AB_NODE_FAILED")>-1&&u.a.createElement(aa,{label:"Time Before Failed",min:1,max:65535,defaultValue:a.timeBeforeFailed,onChange:function(e){return n("".concat(t,".timeBeforeFailed"),e)}}),u.a.createElement(ua,{label:"IP Smart Object Format",onChange:function(e){return n("".concat(t,".isIPSOFormat"),e)},checked:!!a.isIPSOFormat,checkedChildren:"Enable",unCheckedChildren:"Disable"}),u.a.createElement(Na.a,null,u.a.createElement("h3",null,"Measurements")),o&&u.a.createElement(u.a.Fragment,null,u.a.createElement(ua,{label:"Energy Measurement",onChange:function(e){n("".concat(t,".withEnergy"),e),e&&!a.energy&&n("".concat(t,".energy"),{type:"DATA_SOURCE_ENERGY",key:"battery",resourceId:"battery-01",initValue:1500,unit:"mA",behaviours:[],low:1e3,slowDownRate:2,consumInOnePeriod:200})},checked:!!a.withEnergy,checkedChildren:"Enable",unCheckedChildren:"Disable"}),a.withEnergy&&u.a.createElement(Aa,{dataPath:"".concat(t,".energy"),defaultValue:a.energy?a.energy:{type:"DATA_SOURCE_ENERGY",key:"battery",resourceId:"battery-01",initValue:1500,unit:"mA",behaviours:[],low:1e3,slowDownRate:2,consumInOnePeriod:200},onChange:function(e,t){return n(e,t)}})),u.a.createElement(_a,{dataPath:"".concat(t,".sources"),sources:a.sources?a.sources:[],onChange:function(e,t){return n(e,t)}}),u.a.createElement(Fa.a,{overlay:u.a.createElement(St.a,null,u.a.createElement(St.a.Item,{key:"1",onClick:function(){var e=a.sources.length,r="".concat(t,".sources[").concat(e,"]");n(r,{type:"DATA_SOURCE_BOOLEAN",key:"your-boolean-data-key",resourceId:"boolean-measure-id",initValue:!0,unit:"",behaviours:[]})}},"Boolean Data Type"),u.a.createElement(St.a.Item,{key:"2",onClick:function(){var e=a.sources.length,r="".concat(t,".sources[").concat(e,"]");n(r,{type:"DATA_SOURCE_ENUM",key:"your-enum-data-key",resourceId:"enum-measure-id",initValue:"value1",unit:"",behaviours:[],values:["value1","value2"]})}},"Enum Data Type"),u.a.createElement(St.a.Item,{key:"3",onClick:function(){var e=a.sources.length,r="".concat(t,".sources[").concat(e,"]");n(r,{type:"DATA_SOURCE_INTEGER",key:"your-integer-data-key",resourceId:"integer-measure-id",initValue:10,unit:"",behaviours:[],valueConstraints:{min:0,max:100,regularMin:20,regularMax:80,step:1}})}},"Integer Data Type"),u.a.createElement(St.a.Item,{key:"4",onClick:function(){var e=a.sources.length,r="".concat(t,".sources[").concat(e,"]");n(r,{type:"DATA_SOURCE_FLOAT",key:"your-float-data-key",resourceId:"float-measure-id",initValue:10,unit:"",behaviours:[],valueConstraints:{min:0,max:100,regularMin:20,regularMax:80,step:1}})}},"Float Data Type")),placement:"topLeft"},u.a.createElement(Kt.a,{type:"primary",style:{margin:"20px"}},"Add New Measure ",u.a.createElement(Va.a,null))))},Pa=function(){return{connConfig:{host:"localhost",port:27017,username:null,password:null,options:null},devId:null,dbname:null,startTime:Date.now(),endTime:Date.now()}},La=function(){return{id:"id-".concat(Date.now()),objectId:null,name:"name-".concat(Date.now()),enable:!0,isFromDatabase:!1,topic:null,userData:null,dataSource:{timePeriod:5,scale:1,dosAttackSpeedUpRate:5,timeBeforeFailed:20,sensorBehaviours:[],withEnergy:!1,isIPSOFormat:!1,energy:null,sources:[]}}},Ga=function(e){Object(Ct.a)(a,e);var t=Object(yt.a)(a);function a(e){var n;Object(Ot.a)(this,a),n=t.call(this,e);var r=e.model,o=e.selectedSensor,c=e.selectedActuator,l=e.formID,i=[null],u=null,s="SENSOR-FORM"===l?o:"ACTUATOR-FORM"===l?c:null;if(r.things)for(var d=r.things,h=0;h<d.length;h++)if(i.push(d[h].id),null!==s&&null===u){var m=d[h],f=m.sensors,g=m.actuators;if("SENSOR-FORM"===l&&f){for(var p=0;p<f.length;p++)if(f[p].id===s.id){u=d[h].id;break}}else if("ACTUATOR-FORM"===l&&g)for(var b=0;b<g.length;b++)if(g[b].id===s.id){u=d[h].id;break}}var E=te(Pa()),O=te({timePeriod:5,scale:1,dosAttackSpeedUpRate:5,timeBeforeFailed:20,sensorBehaviours:[],withEnergy:!1,isIPSOFormat:!1,energy:null,sources:[]}),v=La();return s&&((v=te(s)).isFromDatabase?E=v.dataSource:O=v.dataSource),n.state={data:v,thingID:i[1],thingIDs:i,replayDS:E,generateDS:O,error:null},n}return Object(vt.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=e.model,a=e.selectedSensor,n=e.selectedActuator,r=e.formID,o=[null],c=null,l="SENSOR-FORM"===r?a:"ACTUATOR-FORM"===r?n:null;if(t.things)for(var i=t.things,u=0;u<i.length;u++)if(o.push(i[u].id),null!==l&&null===c){var s=i[u],d=s.sensors,h=s.actuators;if("SENSOR-FORM"===r&&d){for(var m=0;m<d.length;m++)if(d[m].id===l.id){c=i[u].id;break}}else if("ACTUATOR-FORM"===r&&h)for(var f=0;f<h.length;f++)if(h[f].id===l.id){c=i[u].id;break}}var g=te(Pa()),p=te({timePeriod:5,scale:1,dosAttackSpeedUpRate:5,timeBeforeFailed:20,sensorBehaviours:[],withEnergy:!1,isIPSOFormat:!1,energy:null,sources:[]}),b=La();l&&((b=te(l)).isFromDatabase?g=b.dataSource:p=b.dataSource),this.setState({data:b,thingID:c||o[1],thingIDs:o,replayDS:g,generateDS:p,error:null,isDG:!1})}},{key:"componentDidMount",value:function(){this.setState({isDG:oe()})}},{key:"onThingChange",value:function(e){this.setState({thingID:e})}},{key:"onChangeDataSource",value:function(e){e?this.setState((function(e){var t=Object($.a)({},e.data);return ee(t,"dataSource",e.replayDS),ee(t,"isFromDatabase",!0),{data:t,error:null,generateDS:e.generateDS}})):this.setState((function(e){var t=Object($.a)({},e.data);return ee(t,"dataSource",e.generateDS),ee(t,"isFromDatabase",!1),{data:t,error:null,replayDS:e.replayDS}}))}},{key:"onDataChange",value:function(e,t){this.setState((function(a){var n=Object($.a)({},a.data);return ee(n,e,t),{data:n,error:null}}))}},{key:"handleOk",value:function(){var e=this.state,t=e.thingID,a=e.data,n=this.props,r=n.formID,o=n.addSimulationSensor,c=n.addSimulationActuator,l=n.showModal;"SENSOR-FORM"===r?(o(t,a),l(null),this.props.selectSensor(null)):"ACTUATOR-FORM"===r?(c(t,a),l(null),this.props.selectActuator(null)):(console.log("[ERROR] Invalid form: ".concat(r)),this.setState({error:"[ERROR] Invalid form: ".concat(r)}))}},{key:"handleCancel",value:function(){this.props.showModal(null),this.props.selectSensor(null),this.props.selectActuator(null)}},{key:"handleDuplicate",value:function(){var e=this.state,t=e.thingID,a=e.isDG,n=this.props,r=n.formID,o=n.addSimulationSensor,c=n.addSimulationActuator,l=n.showModal,i=n.selectSensor,u=n.selectActuator;if("SENSOR-FORM"===r){var s="sensor-".concat(Date.now()),d=Object($.a)(Object($.a)({},this.state.data),{},{id:s,name:"New Sensor"});o(t,d),i(d),setTimeout((function(){l("SENSOR-FORM")}),1e3),l(null)}else if("ACTUATOR-FORM"===r){var h="act-".concat(Date.now()),m=Object($.a)(Object($.a)({},this.state.data),{},{id:h,name:"New Actuator"});a?(c(m),setTimeout((function(){l("ACTUATOR-FORM")}),1e3),u(m),l(null)):(console.log("[ERROR] Undefined tool or invalid form: ".concat(a,", ").concat(r)),this.setState({error:"[ERROR] Undefined tool or invalid form: ".concat(a,", ").concat(r)}))}else console.log("[ERROR] Invalid form: ".concat(r)),this.setState({error:"[ERROR] Invalid form: ".concat(r)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.error,r=t.thingID,o=t.thingIDs,c=t.isDG,l=this.props,i=l.formID,s=l.selectedActuator,d=l.selectedSensor;if(!c&&"ACTUATOR-FORM"===i)return null;var h=null;h=d&&"SENSOR-FORM"===i||s&&"ACTUATOR-FORM"===i?[u.a.createElement(Kt.a,{key:"duplicate",onClick:function(){return e.handleDuplicate()}},"Duplicate"),u.a.createElement(Kt.a,{key:"cancel",onClick:function(){return e.handleCancel()}},"Cancel"),u.a.createElement(Kt.a,{key:"ok",type:"primary",onClick:function(){return e.handleOk()}},"OK")]:[u.a.createElement(Kt.a,{key:"cancel",onClick:function(){return e.handleCancel()}},"Cancel"),u.a.createElement(Kt.a,{key:"ok",type:"primary",onClick:function(){return e.handleOk()}},"OK")];var m="SENSOR-FORM"===i,f=a.topic?a.topic:"things/".concat(r,"/sensors").concat(a.objectId?"/".concat(a.objectId):"","/").concat(a.id);return u.a.createElement(Jt,{title:"".concat(m?"Sensor":"Actuator"),visible:m||c&&"ACTUATOR-FORM"===i,onCancel:function(){return e.handleCancel()},footer:h},u.a.createElement(Qt.a,{labelCol:{span:4},wrapperCol:{span:14}},u.a.createElement(ea,{label:"Device",defaultValue:r,onChange:function(t){return e.onThingChange(t)},options:o}),u.a.createElement(Xt,{label:"Instance Id",defaultValue:a.id,onChange:function(t){return e.onDataChange("id",t)},placeholder:"Identify of the device"}),u.a.createElement(Xt,{label:"Object Id",defaultValue:a.objectId,onChange:function(t){return e.onDataChange("objectId",t)},placeholder:"Identify of the type of device (IPSO Standard)"}),u.a.createElement(Xt,{label:"Name",defaultValue:a.name,onChange:function(t){return e.onDataChange("name",t)}}),!c&&u.a.createElement(pa,{label:"Topic",defaultValue:f,onChange:function(t){return e.onDataChange("topic",t)}}),u.a.createElement(Xt,{label:"User Data",defaultValue:JSON.stringify(a.userData),onChange:function(t){return e.onDataChange("userData",t)},placeholder:"User data in JSON format"}),u.a.createElement(ua,{label:"Enable",onChange:function(t){return e.onDataChange("enable",t)},checked:!!a.enable,checkedChildren:"On",unCheckedChildren:"Off"}),u.a.createElement(ea,{label:"Data Source",defaultValue:a.isFromDatabase?"Replay":"Generate",onChange:function(t){e.onChangeDataSource("Replay"===t)},options:["Replay","Generate"]}),a.isFromDatabase?u.a.createElement(Da,{dataPath:"dataSource",dataSource:a.dataSource,onDataChange:function(t,a){return e.onDataChange(t,a)}}):u.a.createElement(Ua,{dataPath:"dataSource",dataSource:a.dataSource,onDataChange:function(t,a){return e.onDataChange(t,a)},showEnergyOption:!c&&"SENSOR-FORM"===i})),n&&u.a.createElement(zt.a,{message:n,type:"error"}))}}]),a}(i.Component),Ba=Object(h.b)((function(e){var t=e.editingForm,a=e.model;return{formID:t.formID,selectedSensor:t.selectedSensor,selectedActuator:t.selectedActuator,model:a}}),(function(e){return{showModal:function(t){return e(K(t))},addSimulationSensor:function(t,a){return e(k({thingID:t,sensor:a}))},addSimulationActuator:function(t,a){return e(T({thingID:t,actuator:a}))},selectActuator:function(t){return e(z(t))},selectSensor:function(t){return e(Q(t))}}}))(Ga),Ha=(a(514),Ba),Wa=function(){return{id:"act-id-".concat(Date.now()),objectId:null,name:"act-name-".concat(Date.now()),topic:null,enable:!0}},Ya=function(e){Object(Ct.a)(a,e);var t=Object(yt.a)(a);function a(e){var n;Object(Ot.a)(this,a),n=t.call(this,e);var r=e.model,o=e.selectedActuator,c=[null],l=null;if(r.things)for(var i=r.things,u=0;u<i.length;u++)if(c.push(i[u].id),null!==o&&null===l)for(var s=i[u].actuators,d=0;d<s.length;d++)if(s[d].id===o.id){l=i[u].id;break}return n.state={data:o?te(o):Wa(),thingID:l||c[1],thingIDs:c,error:null},n}return Object(vt.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=e.model,a=e.selectedActuator,n=[null],r=null;if(t.things)for(var o=t.things,c=0;c<o.length;c++)if(n.push(o[c].id),null!==a&&null===r)for(var l=o[c].actuators,i=0;i<l.length;i++)if(l[i].id===a.id){r=o[c].id;break}this.setState({data:a?te(a):Wa(),thingID:r||n[1],thingIDs:n,error:null})}},{key:"onThingChange",value:function(e){this.setState({thingID:e})}},{key:"onDataChange",value:function(e,t){this.setState((function(a){var n=Object($.a)({},a.data);return ee(n,e,t),{data:n,error:null}}))}},{key:"handleOk",value:function(){var e=this.state,t=e.thingID,a=e.data,n=this.props,r=n.addSimulationActuator,o=n.showModal;r(t,a),o(null),this.props.selectActuator(null)}},{key:"handleCancel",value:function(){this.props.showModal(null),this.props.selectActuator(null)}},{key:"handleDuplicate",value:function(){var e=this.state.thingID,t=this.props,a=t.addSimulationActuator,n=t.showModal,r=t.selectActuator,o="act-".concat(Date.now()),c=Object($.a)(Object($.a)({},this.state.data),{},{id:o,objectId:this.state.objectId,name:"New Actuator"});a(e,c),n(null),setTimeout((function(){r(c),n("ACTUATOR-FORM")}),300)}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.error,r=t.thingID,o=t.thingIDs,c=this.props.formID,l=null;l=this.props.selectedActuator?[u.a.createElement(Kt.a,{key:"duplicate",onClick:function(){return e.handleDuplicate()}},"Duplicate"),u.a.createElement(Kt.a,{key:"cancel",onClick:function(){return e.handleCancel()}},"Cancel"),u.a.createElement(Kt.a,{key:"ok",type:"primary",onClick:function(){return e.handleOk()}},"OK")]:[u.a.createElement(Kt.a,{key:"cancel",onClick:function(){return e.handleCancel()}},"Cancel"),u.a.createElement(Kt.a,{key:"ok",type:"primary",onClick:function(){return e.handleOk()}},"OK")];var i=a.topic?a.topic:"things/".concat(r,"/actuators").concat(a.objectId?"/".concat(a.objectId):"","/").concat(a.id,"/#"),s=oe();return u.a.createElement(Jt,{title:"Actuator",visible:"ACTUATOR-FORM"===c&&!s,onCancel:function(){return e.handleCancel()},footer:l},u.a.createElement(Qt.a,{labelCol:{span:4},wrapperCol:{span:14}},u.a.createElement(ea,{label:"Device",defaultValue:r,onChange:function(t){return e.onThingChange(t)},options:o}),u.a.createElement(Xt,{label:"Instance Id",defaultValue:a.id,onChange:function(t){return e.onDataChange("id",t)}}),u.a.createElement(Xt,{label:"Object Id",defaultValue:a.objectId,onChange:function(t){return e.onDataChange("objectId",t)},placeholder:"Identify of device type (IP Smart Object Format)"}),u.a.createElement(Xt,{label:"Name",defaultValue:a.name,onChange:function(t){return e.onDataChange("name",t)}}),u.a.createElement(aa,{label:"Number of Instance",min:1,max:1e6,placeholder:"Number of instances",defaultValue:a.scale?a.scale:1,onChange:function(t){return e.onDataChange("scale",t)}}),u.a.createElement(pa,{label:"Topic",defaultValue:i,onChange:function(t){return e.onDataChange("topic",t)}}),u.a.createElement(ua,{label:"Enable",onChange:function(t){return e.onDataChange("enable",t)},checked:!!a.enable,checkedChildren:"On",unCheckedChildren:"Off"})),n&&u.a.createElement(zt.a,{message:n,type:"error"}))}}]),a}(i.Component),Ka=Object(h.b)((function(e){var t=e.editingForm,a=e.model;return{formID:t.formID,selectedActuator:t.selectedActuator,model:a}}),(function(e){return{showModal:function(t){return e(K(t))},selectActuator:function(t){return e(z(t))},addSimulationActuator:function(t,a){return e(T({thingID:t,actuator:a}))}}}))(Ya),qa=(a(515),Ka),Ja=a(173),Qa=a(288),za=a.n(Qa),Za=(a(516),{tree:"tree",view:"view",form:"form",code:"code",text:"text"}),Xa=Object.values(Za);Za.allValues=Xa;var $a=function(e){Object(Ct.a)(a,e);var t=Object(yt.a)(a);function a(e){var n;return Object(Ot.a)(this,a),(n=t.call(this,e)).htmlElementRef=null,n.jsonEditor=null,n.handleChange=n.handleChange.bind(Object(Yt.a)(n)),n.setRef=n.setRef.bind(Object(Yt.a)(n)),n.collapseAll=n.collapseAll.bind(Object(Yt.a)(n)),n.expandAll=n.expandAll.bind(Object(Yt.a)(n)),n.focus=n.focus.bind(Object(Yt.a)(n)),n}return Object(vt.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.allowedModes,a=(e.innerRef,e.htmlElementProps,e.tag,e.onChange,Object(Ja.a)(e,["allowedModes","innerRef","htmlElementProps","tag","onChange"]));this.createEditor(Object($.a)(Object($.a)({},a),{},{modes:t}))}},{key:"componentDidUpdate",value:function(e){var t=e.allowedModes,a=e.schema,n=e.name,r=e.theme,o=e.schemaRefs,c=(e.innerRef,e.htmlElementProps,e.tag,e.onChange,Object(Ja.a)(e,["allowedModes","schema","name","theme","schemaRefs","innerRef","htmlElementProps","tag","onChange"]));this.jsonEditor&&(r!==this.props.theme?this.createEditor(Object($.a)(Object($.a)({},c),{},{theme:r,modes:t})):(a===this.props.schema&&o===this.props.schemaRefs||this.jsonEditor.setSchema(a,o),n!==this.jsonEditor.getName()&&this.jsonEditor.setName(n)))}},{key:"shouldComponentUpdate",value:function(e){return e.htmlElementProps!==this.props.htmlElementProps}},{key:"componentWillUnmount",value:function(){this.jsonEditor&&(this.jsonEditor.destroy(),this.jsonEditor=null)}},{key:"componentWillReceiveProps",value:function(e){this.props.value!==e.value&&this.jsonEditor.set(e.value)}},{key:"setRef",value:function(e){this.htmlElementRef=e,this.props.innerRef&&this.props.innerRef(e)}},{key:"createEditor",value:function(e){var t=e.value,a=Object(Ja.a)(e,["value"]);this.jsonEditor&&this.jsonEditor.destroy(),this.jsonEditor=new za.a(this.htmlElementRef,Object($.a)({onChange:this.handleChange},a)),this.jsonEditor.set(t)}},{key:"handleChange",value:function(){if(this.props.onChange)try{""===this.jsonEditor.getText()&&this.props.onChange(null);var e=this.jsonEditor.get();this.props.value!==e&&this.props.onChange(e)}catch(t){this.err=t}}},{key:"collapseAll",value:function(){this.jsonEditor&&this.jsonEditor.collapseAll()}},{key:"expandAll",value:function(){this.jsonEditor&&this.jsonEditor.expandAll()}},{key:"focus",value:function(){this.jsonEditor&&this.jsonEditor.focus()}},{key:"render",value:function(){var e=this.props,t=e.htmlElementProps,a=e.tag;return u.a.createElement(a,Object($.a)(Object($.a)({},t),{},{ref:this.setRef}))}}]),a}(i.Component);$a.defaultProps={tag:"div",mode:Za.tree,history:!1,search:!0,navigationBar:!0,statusBar:!0},$a.modes=Za;var en=a(289),tn=a.n(en),an=(a(517),a(519),a(520),function(e){var t=e.value,a=e.onChange;return u.a.createElement($a,{value:t,onChange:a,allowedModes:["tree","code"],ace:tn.a,theme:"ace/theme/github"})}),nn=a(290),rn=a(590),on=a(591),cn=a(592),ln=a(580),un=a(564),sn=a(292),dn=(a(530),function(e){var t=e.id,a=e.stats,n=e.children;return u.a.createElement("div",null,a.status&&u.a.createElement("p",null,u.a.createElement(ln.a,{status:"SIMULATING"===a.status?"processing":"error",text:a.status,className:a.status})),u.a.createElement("p",null,"Id: ",t),u.a.createElement("p",null,"Started Time: ",new Date(a.startedTime).toLocaleTimeString()),u.a.createElement("p",null,"Last Activity: ",new Date(a.lastActivity).toLocaleTimeString()),n)}),hn=function(e){var t=e.data,a=t.id,n=t.stats,r=t.devType,o=u.a.createElement(rn.a,null),c=u.a.createElement("div",null,u.a.createElement("p",null,"Id: ",a));switch(r){case"GATEWAY":o=u.a.createElement(rn.a,null),n&&(c=u.a.createElement(dn,{id:a,stats:n},u.a.createElement("p",null,"Sent:"," ",u.a.createElement(ln.a,{overflowCount:1e4,showZero:!0,count:n.numberOfSentData,style:{backgroundColor:"#52c41a"}})),u.a.createElement("p",null,"Received:"," ",u.a.createElement(ln.a,{overflowCount:1e4,showZero:!0,count:n.numberOfReceivedData?n.numberOfReceivedData:0}))));break;case"SENSOR":o=u.a.createElement(on.a,null),n&&(c=u.a.createElement(dn,{id:a,stats:n},u.a.createElement("p",null,"Sent:"," ",u.a.createElement(ln.a,{overflowCount:1e4,showZero:!0,count:n.numberOfSentData,style:{backgroundColor:"#52c41a"}}))));break;case"ACTUATOR":o=u.a.createElement(cn.a,null),n&&(c=u.a.createElement(dn,{id:a,stats:n},u.a.createElement("p",null,"Received:"," ",u.a.createElement(ln.a,{overflowCount:1e4,showZero:!0,count:n.numberOfReceivedData})),n.lastReceivedData&&u.a.createElement("p",null,"Last Received Data: ",n.lastReceivedData)))}return u.a.createElement(un.a,{content:c,title:"".concat(t.devType,": ").concat(t.name)},u.a.createElement(sn.a,{style:{verticalAlign:"middle"},icon:o}))},mn={automaticRearrangeAfterDropNode:!1,collapsible:!1,height:400,highlightDegree:1,highlightOpacity:.2,linkHighlightBehavior:!0,maxZoom:3,minZoom:.5,nodeHighlightBehavior:!0,panAndZoom:!1,staticGraph:!1,width:800,directed:!0,node:{fontColor:"black",fontSize:10,fontWeight:"normal",highlightColor:"red",highlightFontSize:10,highlightFontWeight:"bold",highlightStrokeColor:"SAME",highlightStrokeWidth:1.5,mouseCursor:"pointer",opacity:1,renderLabel:!1,size:400,strokeColor:"none",strokeWidth:1,svg:"",symbolType:"circle",viewGenerator:function(e){return u.a.createElement(hn,{data:e})}},link:{color:"#d3d3d3",opacity:1,semanticStrokeWidth:!1,strokeWidth:2,highlightColor:"blue",renderLabel:!0,labelProperty:function(e){return e.numberOfData}}},fn=function(e,t){if(!t||0===t.length)return null;for(var a=0;a<t.length;a++){var n=t[a];if(n.id===e)return n}return null},gn=function(e,t){var a=e.things;if(!a||0===a.length)return null;for(var n=[],r=[],o=0;o<a.length;o++){var c=a[o],l=fn(c.id,t);n.push({id:c.id,name:c.name,devType:"GATEWAY",stats:l});var i=c.sensors,u=c.actuators;if(i)for(var s=0;s<i.length;s++){var d=i[s],h="".concat(c.id,"-").concat(d.id),m=l?fn(d.id,l.sensorStats):null,f=m?m.numberOfSentData:0;n.push({id:h,name:d.name,devType:"SENSOR",stats:m}),r.push({source:h,target:c.id,numberOfData:f})}if(u)for(var g=0;g<u.length;g++){var p=u[g],b="".concat(c.id,"-").concat(p.id),E=l?fn(p.id,l.actuatorStats):null,O=E?E.numberOfReceivedData:0;E&&(E.status=l.status,E.startedTime=l.startedTime),n.push({id:b,name:p.name,devType:"ACTUATOR",stats:E}),r.push({source:c.id,target:b,numberOfData:O})}}return{nodes:n,links:r}},pn=function(e){Object(Ct.a)(a,e);var t=Object(yt.a)(a);function a(e){var n;Object(Ot.a)(this,a);var r=(n=t.call(this,e)).props,o=r.model,c=r.stats,l=gn(o,c);return n.state={data:l},n}return Object(vt.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=oe();this.props.requestStats(t),console.log(this.timerId),this.props.deployStatus&&(this.timerId=setInterval((function(){e.props.requestStats(t)}),5e3))}},{key:"componentWillReceiveProps",value:function(e){var t=oe();console.log(this.timerId);var a=e.model,n=e.stats,r=gn(a,n);this.setState({data:r}),e.deployStatus?this.timerId||(e.requestStats(t),this.timerId=setInterval((function(){e.requestStats(t)}),5e3)):this.timerId&&clearInterval(this.timerId)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerId)}},{key:"render",value:function(){var e=this.state.data;return e?(console.log(e),u.a.createElement(nn.Graph,{id:"graph-id",data:e,config:mn})):u.a.createElement("p",null,"Empty model")}}]),a}(u.a.Component),bn=Object(h.b)((function(e){return{model:e.model,stats:e.stats,deployStatus:e.deployStatus}}),(function(e){return{requestStats:function(t){return e(Z(t))}}}))(pn),En=a(571),On=function(e){var t=e.list,a=e.editHandler,n=e.deleteHandler,r=e.itemAvatar,o=e.changeStatus;return u.a.createElement(ha.a,{itemLayout:"horizontal",dataSource:t,renderItem:function(e){return u.a.createElement(ha.a.Item,{actions:[u.a.createElement(Kt.a,{key:"item-edit",size:"small",onClick:function(){return a(e)}},"Edit"),u.a.createElement(Kt.a,{key:"item-delete",size:"small",onClick:function(){return n(e)},type:"danger"},"Delete"),u.a.createElement(ia.a,{key:"item-enable",onChange:function(){return o(e)},checkedChildren:"Enable",unCheckedChildren:"Disable",checked:e.enable})]},u.a.createElement(En.a,{avatar:!0,title:!1,loading:e.loading},u.a.createElement(ha.a.Item.Meta,{avatar:u.a.createElement(sn.a,null,r),title:u.a.createElement("span",{onClick:function(){return a(e)},style:{cursor:"pointer"}},e.name?e.name:e.id),description:"Id: ".concat(e.id).concat(e.name?"- name: ".concat(e.name):"","- enable: ").concat(!!e.enable)})))}})},vn=a(576),Cn=function(e){var t=e.thing,a=e.actions,n=a.showModal,r=a.selectThing,o=a.deleteThing,c=a.changeStatusThing,l=a.selectSensor,i=a.deleteSensor,s=a.changeStatusSensor,d=a.selectActuator,h=a.deleteActuator,m=a.changeStatusActuator;return u.a.createElement(va,{title:"Thing ".concat(t.id)},u.a.createElement(ha.a.Item,{actions:[u.a.createElement(Kt.a,{key:"thing-edit",size:"small",onClick:function(){r(t),n("THING-FORM")}},"Edit"),u.a.createElement(Kt.a,{key:"thing-delete",size:"small",onClick:function(){o(t.id)},type:"danger"},"Delete"),u.a.createElement(ia.a,{key:"thing-enable",onChange:function(e){c(t.id)},checkedChildren:"Enable",unCheckedChildren:"Disable",checked:t.enable})]},u.a.createElement(ha.a.Item.Meta,{avatar:u.a.createElement(sn.a,null,u.a.createElement(rn.a,null)),title:u.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){r(t),n("THING-FORM")}},t.name?t.name:t.id),description:"Id: ".concat(t.id).concat(t.name?"- name: ".concat(t.name):"","- enable: ").concat(!!t.enable)})),u.a.createElement(vn.a,{className:"site-page-header",title:"Connection",subTitle:"Protocol: ".concat(t.protocol)}),u.a.createElement("p",null,"Host: ",u.a.createElement("strong",null,t.connConfig.host)),u.a.createElement("p",null,"Port: ",u.a.createElement("strong",null,t.connConfig.port)),t.sensors&&u.a.createElement(u.a.Fragment,null,u.a.createElement(vn.a,{className:"site-page-header",title:"Sensors",subTitle:"Total: ".concat(t.sensors.length)}),u.a.createElement(On,{list:t.sensors,editHandler:function(e){l(e),n("SENSOR-FORM")},deleteHandler:function(e){i(e.id,t.id)},changeStatus:function(e){s(e.id,t.id)},itemAvatar:u.a.createElement(on.a,null)})),t.actuators&&u.a.createElement(u.a.Fragment,null,u.a.createElement(vn.a,{className:"site-page-header",title:"Actuators",subTitle:"Total: ".concat(t.actuators.length)}),u.a.createElement(On,{list:t.actuators,editHandler:function(e){d(e),n("ACTUATOR-FORM")},deleteHandler:function(e){h(e.id,t.id)},changeStatus:function(e){m(e.id,t.id)},itemAvatar:u.a.createElement(cn.a,null)})))},yn=function(e){var t=e.things,a=e.actions;return u.a.createElement(ha.a,{itemLayout:"horizontal",dataSource:t,renderItem:function(e){return u.a.createElement(Cn,{thing:e,actions:a})}})},Sn=(a(535),jt.a.Paragraph),jn=function(e){var t=e.model,a=t.sensors,n=t.actuators,r=t.things,o=t.name,c=e.modelType,l=e.actions,i=l.showModal,s=l.selectThing,d=l.deleteThing,h=l.changeStatusThing,m=l.selectSensor,f=l.deleteSensor,g=l.changeStatusSensor,p=l.selectActuator,b=l.deleteActuator,E=l.changeStatusActuator,O=l.changeModelName;return u.a.createElement("div",null,u.a.createElement(va,{title:"Overview",active:!0},u.a.createElement(Sn,{editable:{onChange:function(e){return O(e)}}},o),u.a.createElement("span",null,"Type: ",u.a.createElement("strong",null,c))),r&&u.a.createElement(va,{title:"Things (".concat(r.length,")"),active:!0},u.a.createElement(yn,{things:r,actions:{showModal:i,selectThing:s,deleteThing:d,changeStatusThing:h,selectSensor:m,deleteSensor:f,changeStatusSensor:g,selectActuator:p,deleteActuator:b,changeStatusActuator:E}})),a&&u.a.createElement(va,{title:"Free Sensors (".concat(a.length,")"),active:!1},u.a.createElement(On,{list:a,editHandler:function(e){m(e),i("SENSOR-FORM")},deleteHandler:function(e){f(e.id,null)},changeStatus:function(e){g(e.id,null)},itemAvatar:u.a.createElement(on.a,null)})),n&&u.a.createElement(va,{title:"Free Actuators (".concat(n.length,")"),active:!1},u.a.createElement(On,{list:n,editHandler:function(e){p(e),i("ACTUATOR-FORM")},deleteHandler:function(e){b(e.id,null)},changeStatus:function(e){E(e.id,null)},itemAvatar:u.a.createElement(cn.a,null)})))},Dn=a(573),kn=(a(536),ft.a.Sider),Tn=function(e){var t=e.defaultKey,a=e.items,n=e.rightSide,r=e.theme;return u.a.createElement(kn,{className:"side-background-color",breakpoint:"lg",collapsedWidth:"0"},u.a.createElement(St.a,{mode:"inline",theme:r||"light",style:n?{height:"100%",borderRight:0}:{height:"100%",borderLeft:10},defaultSelectedKeys:["".concat(t)],defaultOpenKeys:["sub".concat(t)]},a.map((function(e){return e.action?u.a.createElement(St.a.Item,{key:e.key,onClick:e.action},e.icon,e.text):e.href?u.a.createElement(St.a.Item,{key:e.key},u.a.createElement("a",{href:e.href},e.icon,e.text)):u.a.createElement(St.a.Item,{key:e.key},e.icon,e.text)}))))},An=function(e){Object(Ct.a)(a,e);var t=Object(yt.a)(a);function a(){return Object(Ot.a)(this,a),t.apply(this,arguments)}return Object(vt.a)(a,[{key:"render",value:function(){var e=this.props.showModal,t=[{key:3,text:"Add Device",action:function(){return e("THING-FORM")},icon:u.a.createElement(rn.a,null)},{key:1,text:"Add Sensor",action:function(){return e("SENSOR-FORM")},icon:u.a.createElement(on.a,null)},{key:2,text:"Add Actuator",action:function(){return e("ACTUATOR-FORM")},icon:u.a.createElement(cn.a,null)}];return u.a.createElement(Tn,{rightSide:!0,items:t,theme:"dark"})}}]),a}(i.Component),Rn=Object(h.b)(null,(function(e){return{showModal:function(t){return e(K(t))}}}))(An),In=a(593),wn=a(594),xn=a(595),Mn=(a(537),function(e){Object(Ct.a)(a,e);var t=Object(yt.a)(a);function a(){return Object(Ot.a)(this,a),t.apply(this,arguments)}return Object(vt.a)(a,[{key:"render",value:function(){var e=[{key:7,text:"List View",href:"?view=list",icon:u.a.createElement(In.a,null)},{key:5,text:"JSON View",href:"?view=json",icon:u.a.createElement(wn.a,null)},{key:6,text:"Graph View",href:"?view=graph",icon:u.a.createElement(xn.a,null)}],t=7,a=ce("view");if(a)switch(a){case"list":t=7;break;case"json":t=5;break;case"graph":t=6}return u.a.createElement(Tn,{className:"right-sider",rightSide:!1,items:e,defaultKey:t,theme:"light"})}}]),a}(i.Component)),_n=(a(538),ft.a.Content),Nn=function(e){Object(Ct.a)(a,e);var t=Object(yt.a)(a);function a(e){var n;Object(Ot.a)(this,a),n=t.call(this,e);var r=e.deployStatus,o=null,c=oe();return r&&(o="".concat(c?"Data Generator":"Simulation"," is running. Model name ").concat(r.model,". Started time: ").concat(new Date(r.startedTime))),n.state={isDG:c,isLogPage:window.location.pathname.indexOf("/logs")>-1,statusMessage:o},n}return Object(vt.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=e.deployStatus,a=null;t&&(a="".concat(this.state.isDG?"Data Generator":"Simulation"," is running. Model name ").concat(t.model,". Started time: ").concat(new Date(t.startedTime))),this.setState({statusMessage:a})}},{key:"componentDidMount",value:function(){var e=this;this.props.requestDeployStatus(this.state.isDG),setInterval((function(){e.props.requestDeployStatus(e.state.isDG)}),3e3)}},{key:"render",value:function(){var e=this.state,t=e.isLogPage,a=e.statusMessage,n=this.props,r=n.requesting,o=n.notify,c=n.resetNotification;return u.a.createElement(ft.a,null,!t&&u.a.createElement(Rn,null),o&&Dn.a[o.type]({message:o.type.toUpperCase(),description:"object"===typeof o.message?JSON.stringify(o.message):o.message,onClose:function(){return c()}}),u.a.createElement(ft.a,{style:{padding:"0 24px 24px"}},u.a.createElement(_n,null,a&&u.a.createElement(zt.a,{message:a,type:"info",style:{marginBottom:"10px",marginTop:"20px"},showIcon:!0}),r?u.a.createElement(Tt.a,{tip:"Loading..."}):this.props.children)),!t&&u.a.createElement(Mn,null))}}]),a}(i.Component),Fn=Object(h.b)((function(e){var t=e.requesting;return{notify:e.notify,requesting:t,deployStatus:e.deployStatus}}),(function(e){return{requestDeployStatus:function(t){return e(U(t))},resetNotification:function(){return e(v())}}}))(Nn),Vn=function(e){Object(Ct.a)(a,e);var t=Object(yt.a)(a);function a(e){var n;return Object(Ot.a)(this,a),(n=t.call(this,e)).state={tempModel:e.model,isDG:!1},n.onModelChange=n.onModelChange.bind(Object(Yt.a)(n)),n}return Object(vt.a)(a,[{key:"componentDidMount",value:function(){var e=oe();this.props.initData(e),this.setState({isDG:e})}},{key:"componentWillReceiveProps",value:function(e){this.setState({tempModel:e.model})}},{key:"onModelChange",value:function(e){this.setState({tempModel:e})}},{key:"render",value:function(){var e=this,t=this.state.isDG,a=this.props,n=a.model,r=a.saveModel,o=a.showModal,c=a.selectThing,l=a.deleteThing,i=a.changeStatusThing,s=a.selectSensor,d=a.deleteSensor,h=a.changeStatusSensor,m=a.selectActuator,f=a.deleteActuator,g=a.changeStatusActuator,p=a.formID,b=a.changeModelName,E=ce("view");E||(E="list");var O=null;return O="json"===E?u.a.createElement(an,{value:n,onChange:this.onModelChange}):"graph"===E?u.a.createElement(bn,null):u.a.createElement(jn,{model:n,modelType:t?"Data Geneartor":"Simulation",actions:{showModal:o,selectThing:c,deleteThing:l,changeStatusThing:i,selectSensor:s,deleteSensor:d,changeStatusSensor:h,selectActuator:m,deleteActuator:f,changeStatusActuator:g,changeModelName:b}}),u.a.createElement(Fn,null,O,u.a.createElement(Kt.a,{type:"primary",onClick:function(){return r(t,e.state.tempModel)},style:{marginTop:"10px"}},"Save"),"THING-FORM"===p&&u.a.createElement(ja,null),!t&&"ACTUATOR-FORM"===p&&u.a.createElement(qa,null),("SENSOR-FORM"===p||"ACTUATOR-FORM"===p&&t)&&u.a.createElement(Ha,null))}}]),a}(i.Component),Un=Object(h.b)((function(e){return{model:e.model,formID:e.editingForm.formID}}),(function(e){return{initData:function(t){e(C(t))},saveModel:function(t,a){e(y(a)),e(x(t))},showModal:function(t){return e(K(t))},changeModelName:function(t){return e(S(t))},selectThing:function(t){return e(q(t))},deleteThing:function(t){return e(D(t))},changeStatusThing:function(t){return e(J(t))},selectSensor:function(t){return e(Q(t))},deleteSensor:function(t,a){return e(A({sensorID:t,thingID:a}))},changeStatusSensor:function(t,a){return e(I({sensorID:t,thingID:a}))},selectActuator:function(t){return e(z(t))},deleteActuator:function(t,a){return e(R({actuatorID:t,thingID:a}))},changeStatusActuator:function(t,a){return e(w({actuatorID:t,thingID:a}))}}}))(Vn),Pn=a(596),Ln=function(e){Object(Ct.a)(a,e);var t=Object(yt.a)(a);function a(e){var n;return Object(Ot.a)(this,a),(n=t.call(this,e)).state={logFiles:e.logFiles},n}return Object(vt.a)(a,[{key:"componentDidMount",value:function(){this.props.initData(oe())}},{key:"componentWillReceiveProps",value:function(e){this.setState({logFiles:e.logFiles})}},{key:"render",value:function(){var e=this.props.deleteLogFile,t=this.state.logFiles,a=oe();return u.a.createElement(Fn,null,u.a.createElement(vn.a,{className:"site-page-header",title:"Log files"}),u.a.createElement(ha.a,{bordered:!0,dataSource:t,renderItem:function(t){return u.a.createElement(ha.a.Item,{actions:[u.a.createElement(Kt.a,{key:"list-loadmore-edit",onClick:function(){return e(a,t)},type:"danger"},"Delete")]},u.a.createElement(En.a,{avatar:!0,title:!1,loading:t.loading},u.a.createElement(ha.a.Item.Meta,{avatar:u.a.createElement(sn.a,null,u.a.createElement(Pn.a,null)),title:u.a.createElement("a",{href:"".concat(a?"/data-generator":"","/logs/").concat(t)},t),description:"Created at: ".concat(re(t))})))}}))}}]),a}(i.Component),Gn=Object(h.b)((function(e){return{logFiles:e.logs.logFiles}}),(function(e){return{deleteLogFile:function(t,a){e(W({isDG:t,logFile:a}))},initData:function(t){e(G(t))}}}))(Ln),Bn=jt.a.Text,Hn=function(e){var t=e.type,a=e.time,n=e.device,r=e.message;return u.a.createElement(Dt.a,null,u.a.createElement(kt.a,{span:4},u.a.createElement(Bn,{type:t},a)),u.a.createElement(kt.a,{span:5},u.a.createElement(Bn,{type:t},n)),u.a.createElement(kt.a,{span:15},u.a.createElement(Bn,{type:t},r)))},Wn=function(e){Object(Ct.a)(a,e);var t=Object(yt.a)(a);function a(e){var n;return Object(Ot.a)(this,a),(n=t.call(this,e)).state={logFile:null,isDG:!1},n}return Object(vt.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=function(e){var t=e.split("/");return t[t.length-1]}(window.location.pathname),a=oe();this.setState({logFile:decodeURIComponent(t)}),this.props.requestLogs(a,t),setInterval((function(){e.props.requestLogs(a,t)}),2e4)}},{key:"render",value:function(){var e=this.state.logFile,t=this.props.logs;return u.a.createElement(Fn,null,u.a.createElement(vn.a,{className:"site-page-header",title:e}),u.a.createElement(Hn,{key:-1,type:"warning",time:"Time",device:"Device",message:"Message"}),t?t.split("\n").map((function(e,t){var a=e.split(" ");if(a.length<4)return console.warn("Log is not going to show: ",e),null;var n="info:"===a[2]?"secondary":"danger",r=new Date(a[0]),o="".concat(r.getHours(),":").concat(r.getMinutes(),":").concat(r.getSeconds()," ").concat(r.getDay(),"/").concat(r.getMonth(),"/").concat(r.getFullYear()),c=a[3].replace("[","").replace("]",""),l=e.split(a[3])[1];return u.a.createElement(Hn,{key:t,type:n,time:o,device:c,message:l})})):u.a.createElement("p",null,"Empty"))}}]),a}(i.Component),Yn=Object(h.b)((function(e){var t=e.logs;return{logs:t.logs,logFile:t.logFile}}),(function(e){return{requestLogs:function(t,a){return e(L({isDG:t,logFile:a}))}}}))(Wn);var Kn=function(){return u.a.createElement(gt.a,null,u.a.createElement(Et.a,null,u.a.createElement(ft.a,{className:"layout",style:{height:"100%"}},u.a.createElement(Lt,null),u.a.createElement(pt.c,null,u.a.createElement(pt.a,{path:"/data-generator/logs/:logFile"},u.a.createElement(Yn,null)),u.a.createElement(pt.a,{path:"/data-generator/logs"},u.a.createElement(Gn,null)),u.a.createElement(pt.a,{path:"/data-generator"},u.a.createElement(Un,null)),u.a.createElement(pt.a,{path:"/logs/:logFile"},u.a.createElement(Yn,null)),u.a.createElement(pt.a,{path:"/logs"},u.a.createElement(Gn,null)),u.a.createElement(pt.a,{path:"/"},u.a.createElement(Un,null))),u.a.createElement(Wt,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(555);var qn=mt();d.a.render(u.a.createElement(h.a,{store:qn},u.a.createElement(Kn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[303,1,2]]]);
//# sourceMappingURL=main.b14180cd.chunk.js.map